(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{162:function(e,t,a){e.exports=a(317)},172:function(e,t,a){},220:function(e,t){},317:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),s=a.n(o),i=a(22),l=a(70),c=a.n(l),u=a(19),m=a(24),p=Object(m.a)(),d=(a(172),a(11)),g=a.n(d),h=a(7),f=a(6),b=a(8),v=a(9),k=a(10),E=a(71),y=a(335),N=a(336),w=a(84),O=a.n(w),C=a(85),j=a.n(C);function x(e){e.board;return r.a.createElement("img",{style:{height:"100%",width:"100%"},src:"https://blog.trello.com/hs-fs/hubfs/How%20Managers%20Use%20Trello/TreamGoalSettingCentral.png?width=2519&name=TreamGoalSettingCentral.png",alt:"none"})}var T,D=Object(u.f)((function(e){var t=e.boards.filter((function(e){return"5e2581b51c9d44000081af2a"!==e._id}));return r.a.createElement("section",{className:"boards-list"},r.a.createElement("div",{className:"boards-list-main-container flex"},r.a.createElement("div",{className:"boards-list-main-inner-container flex"},t.map((function(e){return r.a.createElement(E.a,{className:"boards-list-main-inner-container-item",key:e._id,to:"/board/".concat(e._id)},r.a.createElement(x,{board:e}))})))))})),B=a(12),S=a(4),I=a(60),M=a.n(I),A=a(146),U=a.n(A),L={setup:function(){T=U()("/")},terminate:function(){T=null},on:function(e,t){T.on(e,t)},off:function(e,t){T.off(e,t)},emit:function(e,t){T.emit(e,t)}};var F={getRandomId:function(){for(var e="1234567890poiiytreqwasdfghjklmnbvcxxssersgyushquiz",t="",a=0;a<10;a++){var n=Math.floor(Math.random()*e.length);t+=e[n]}return t},createUserIcon:function(e,t){return e.charAt(0)+t.charAt(0)},getRandomColor:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},uploadImg:function(e){var t="https://api.cloudinary.com/v1_1/".concat("dujlxvxxv","/image/upload"),a=new FormData;return a.append("file",e),a.append("upload_preset","xi62wuas"),M.a.post(t,a).then((function(e){return e.data})).then((function(e){return e.url})).catch((function(e){return console.error(e)}))},getImagesFromUnsplash:function(e){var t="https://api.unsplash.com/search/photos?query=".concat(e,"&client_id=").concat("9a992bf0a58ef7c4735758c98ec044dcdb524c2178db25d55cd773d7436f15d1");return M.a.get(t).then((function(e){return e.data})).then((function(e){return e.results})).catch((function(e){return console.error(e)}))},emitNotification:function(e,t){var a={message:e,type:t,insert:"top",container:"bottom-right",animationIn:["animated","zoomIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3}};L.emit("sendNotification",a)}};var R=M.a.create({withCredentials:!0}),P=function(e,t){return V(e,"GET",t)},_=function(e,t){return V(e,"POST",t)},H=function(e,t){return V(e,"PUT",t)},W=function(e,t){return V(e,"DELETE",t)};function V(e){var t,a,n,r=arguments;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:"get",a=r.length>2&&void 0!==r[2]?r[2]:null,o.prev=2,o.next=5,g.a.awrap(R({url:"".concat("/api/").concat(e),method:t,data:a}));case 5:return n=o.sent,o.abrupt("return",n.data);case 9:throw o.prev=9,o.t0=o.catch(2),console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(a)),console.dir(o.t0),o.t0.response&&401===o.t0.response.status&&p.push("/"),o.t0;case 15:case"end":return o.stop()}}),null,null,[[2,9]])}var G={login:function(e){var t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.a.awrap(_("auth/login",e));case 3:return t=a.sent,a.abrupt("return",t);case 7:a.prev=7,a.t0=a.catch(0),console.log("UserService: err in login",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])},logout:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.awrap(_("auth/logout"));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("UserService: err in logout",e.t0);case 8:case"end":return e.stop()}}),null,null,[[0,5]])},signup:function(e){var t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.a.awrap(_("auth/signup",e));case 3:return t=a.sent,a.abrupt("return",t);case 7:a.prev=7,a.t0=a.catch(0),console.log("UserService: err in signup",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])},getLoggedInUser:function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.awrap(P("auth/user"));case 3:return e=t.sent,t.abrupt("return",e);case 7:t.prev=7,t.t0=t.catch(0),console.log("UserService: err in getting loggedInUser",t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])},getUsers:function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.awrap(P("user"));case 3:return e=t.sent,t.abrupt("return",e);case 7:t.prev=7,t.t0=t.catch(0),console.log("UserService: err in getting users",t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])}};function z(){return function(e){return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.awrap(G.logout());case 3:e(J(null)),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in logout",t.t0);case 9:case"end":return t.stop()}}),null,null,[[0,6]])}}function q(){return function(e){var t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.a.awrap(G.getLoggedInUser());case 3:t=a.sent,e(J(t)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("UserActions: err in logout",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])}}function J(e){return{type:"SET_USER",user:e}}function $(e){return{type:"SET_USERS",users:e}}var X=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={msg:"",loginCred:{email:"",password:""},signupCred:{firstName:"",lastName:"",username:"",email:"",password:"",color:F.getRandomColor()}},a.loginHandleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{loginCred:Object(S.a)({},e.loginCred,Object(B.a)({},n,r))}}))},a.signupHandleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{signupCred:Object(S.a)({},e.signupCred,Object(B.a)({},n,r))}}))},a.doLogin=function(e){var t,n,r,o;return g.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.preventDefault(),t=a.state.loginCred,n=t.email,r=t.password,n&&r){s.next=4;break}return s.abrupt("return",a.setState({msg:"Please enter user/password"}));case 4:o={email:n,password:r},a.props.login(o),a.setState({loginCred:{email:"",password:""}});case 7:case"end":return s.stop()}}))},a.doSignup=function(e){var t,n,r,o,s,i,l,c;return g.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e.preventDefault(),t=a.state.signupCred,n=t.firstName,r=t.lastName,o=t.username,s=t.email,i=t.password,l=t.color,n&&r&&s&&i&&o){u.next=4;break}return u.abrupt("return",a.setState({msg:"All inputs are required!"}));case 4:c={firstName:n,lastName:r,username:o,email:s,password:i,color:l},a.props.signup(c),a.setState({signupCred:{firstName:"",lastName:"",username:"",email:"",password:""}}),a.props.toggleLogin();case 8:case"end":return u.stop()}}))},a.doLogout=function(){a.props.logout()},a.doStopPropagation=function(e){e.stopPropagation()},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.getLoggedInUser()}},{key:"render",value:function(){var e=r.a.createElement("form",{className:"login-container-signup text-center",onSubmit:this.doSignup},r.a.createElement("p",null,"Not a member yet? Sign up!"),r.a.createElement("input",{type:"text",name:"firstName",value:this.state.signupCred.firstName,onChange:this.signupHandleChange,placeholder:"First Name"}),r.a.createElement("input",{type:"text",name:"lastName",value:this.state.signupCred.lastName,onChange:this.signupHandleChange,placeholder:"Last Name"}),r.a.createElement("input",{type:"text",name:"email",value:this.state.signupCred.email,onChange:this.signupHandleChange,placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username"}),r.a.createElement("br",null),r.a.createElement("input",{name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",{className:"login-container-signup-btn"},"Signup")),t=r.a.createElement("form",{className:"login-container-login text-center",onSubmit:this.doLogin},r.a.createElement("p",null," Login: "),r.a.createElement("input",{type:"text",name:"email",value:this.state.loginCred.email,onChange:this.loginHandleChange,placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",{className:"login-container-login-btn"},"Login")),a=this.props.loggedInUser;return r.a.createElement("div",{className:"login-container flex column align-center"+(this.props.toggleState?" translateLeft":""),style:this.props.style,onClick:this.doStopPropagation},r.a.createElement("div",{className:"login-container-logo"}),r.a.createElement("h2",null,this.state.msg),r.a.createElement("div",{className:"login-container-form-container"},a&&r.a.createElement("div",null,r.a.createElement("h2",{className:"login-container-loggedin-username"}," ",r.a.createElement("p",null,"Welcome!")," ",a.username," "),r.a.createElement("div",{className:"fill-width flex"},r.a.createElement("button",{className:"login-container-form-container-logout",onClick:this.doLogout},"Logout"))),!this.props.loggedInUser&&t,r.a.createElement("hr",null),!this.props.loggedInUser&&e))}}]),t}(n.Component),K={login:function(e){return function(t){var a;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.awrap(G.login(e));case 3:a=n.sent,t(J(a)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("UserActions: err in login",n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},logout:z,signup:function(e){return function(t){var a;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.awrap(G.signup(e));case 3:a=n.sent,t(J(a)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("UserActions: err in signup",n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},getLoggedInUser:q},Q=Object(i.b)((function(e){return{users:e.user.users,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),K)(X),Y={add:function(e){return _("board",e)},query:function(){return P("board")},get:function(e,t,a,n){return P("board/".concat(e,"?").concat(function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")}(t),"&sortby=").concat(a,"&sortorder=").concat(n))},put:function(e){return H("board/".concat(e._id),e)},remove:function(e){return W("board/".concat(e))}};function Z(e){return{type:"SET_BOARDS",boards:e}}function ee(e,t,a,n){return function(r){var o;return g.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,g.a.awrap(Y.get(e,t,a,n));case 3:o=s.sent,r(te(o)),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log("BoardActions: err in loadBoard",s.t0);case 10:case"end":return s.stop()}}),null,null,[[0,7]])}}function te(e){return{type:"SET_BOARD",board:e}}function ae(e){return{type:"UPDATE_BOARD",board:e}}function ne(e){return function(a){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,g.a.awrap(Y.add(e));case 3:return n=r.sent,a(t(n)),r.abrupt("return",n);case 8:r.prev=8,r.t0=r.catch(0),console.log("BoardActions: err in createBoard",r.t0);case 11:case"end":return r.stop()}}),null,null,[[0,8]])};function t(e){return{type:"ADD_BOARD",addedBoard:e}}}var re=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={toggleLogin:!1},a.toggleLogin=function(e){e&&e.stopPropagation(),a.setState((function(e){return{toggleLogin:!e.toggleLogin}}))},a.closeLogin=function(e){e.stopPropagation(),a.setState({toggleLogin:!1})},a.createBoard=function(){var e,t,n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=a.props.board,t="The Board was created by ".concat(a.props.loggedInUser.username),delete e._id,e.createdBy=a.props.loggedInUser,e.history=[{id:F.getRandomId(),msg:t,time:Date.now()}],r.next=7,g.a.awrap(a.props.createBoard(e));case 7:n=r.sent,a.props.history.push("/board/".concat(n._id));case 9:case"end":return r.stop()}}))},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.loadBoards();this.props.loadBoard("5e2581b51c9d44000081af2a",{title:""})}},{key:"render",value:function(){var e;return e=this.props.loggedInUser?r.a.createElement(y.a,{variant:"outlined",className:"home-page-login-btn"},r.a.createElement("div",{onClick:this.props.logout},"logout")):r.a.createElement(y.a,{variant:"outlined",className:"home-page-login-btn"},r.a.createElement("div",{onClick:this.toggleLogin},"login")),r.a.createElement("div",{className:"home-page",onClick:this.closeLogin},r.a.createElement("section",{className:"home-page-header"},r.a.createElement("div",{variant:"outlined",className:"home-page-login flex justify-end align-center"},this.props.loggedInUser&&r.a.createElement("p",{className:"flex column"},r.a.createElement("small",null,"welcome!"),this.props.loggedInUser.username),e),r.a.createElement(Q,{variant:"outlined",className:"home-page-login",toggleLogin:this.toggleLogin,toggleState:this.state.toggleLogin}),r.a.createElement("div",{className:"home-page-header-container"},r.a.createElement("div",{className:"home-page-header-container-inner-container fill-height fill-width flex column align-center"},r.a.createElement("div",{className:"home-page-header-container-logo"},r.a.createElement("div",{className:"home-page-header-container-logo-img fill-width fill-height"})),r.a.createElement("div",{className:"get-started-btn"},r.a.createElement(E.a,{to:"/board/getstarted"},r.a.createElement(N.a,{variant:"extended"},r.a.createElement("p",null,"GET STARTED"))))))),r.a.createElement("section",{className:"home-page-boards-list flex column justify-center align-center"},r.a.createElement("div",{className:"home-page-boards-list-start-new-board flex justify-center align-center"},r.a.createElement("div",{className:"home-page-boards-list-start-new-board-card flex align-center justify-center",onClick:this.createBoard},r.a.createElement("div",{className:"flex column justify-center align-center"},r.a.createElement("h2",null,"+ ADD NEW LIST"),r.a.createElement("small",null," please sign up first"))),r.a.createElement("p",{className:"home-page-boards-list-start-new-board-right-text"},"We, in Trebello, believe that simplicity and style must go together, that's why we made our brand simple and easy to use for everyone.",r.a.createElement("br",null)," ",r.a.createElement("br",null),"Organize your team and take them one step ahead.")),r.a.createElement("div",{className:"home-page-boards-list-inspiration text-center flex column align-center justify-center"},r.a.createElement("h2",null,"GET SOME INSPIRATION")),r.a.createElement(D,{boards:this.props.boards})),r.a.createElement("section",{className:"home-page-footer flex column align-center justify-center"},r.a.createElement("h2",null," OUR TEAM "),r.a.createElement("div",{className:"home-pagge-footer-team-members-cards-container flex justify-center"},r.a.createElement("div",{className:"home-page-footer-team-member-card flex column align-center justify-center"},r.a.createElement("div",{className:"home-page-footer-team-member-card-member-img vlad"}),r.a.createElement("p",null,"Vlad Batalin"),r.a.createElement("small",null,"Design and overall technical support"),r.a.createElement("div",{className:"flex"},r.a.createElement(O.a,{className:"linkedInIcon"}),r.a.createElement(j.a,{className:"faceBookIcon"}))),r.a.createElement("div",{className:"home-page-footer-team-member-card flex column align-center justify-center"},r.a.createElement("div",{className:"home-page-footer-team-member-card-member-img margad"}),r.a.createElement("p",null,"Margad T."),r.a.createElement("small",null,"High functionality backend support"),r.a.createElement("div",{className:"flex"},r.a.createElement(O.a,{className:"linkedInIcon"}),r.a.createElement(j.a,{className:"faceBookIcon"}))),r.a.createElement("div",{className:"home-page-footer-team-member-card flex column align-center justify-center"},r.a.createElement("div",{className:"home-page-footer-team-member-card-member-img paolo"}),r.a.createElement("p",null,"Paolo Groppi"),r.a.createElement("small",null,"High functionality and backend"),r.a.createElement("div",{className:"flex"},r.a.createElement("a",{href:"https://www.linkedin.com/in/paolo-groppi-6ba84117b",target:"blank"},r.a.createElement(O.a,{className:"linkedInIcon"})),r.a.createElement("a",{href:"https://www.facebook.com/karma.tova",target:"blank"},r.a.createElement(j.a,{className:"faceBookIcon"})))))))}}]),t}(n.Component),oe={loadBoards:function(){return function(e){var t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.a.awrap(Y.query());case 3:t=a.sent,e(Z(t)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("BoardActions: err in loadBoards",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])}},loadBoard:ee,createBoard:ne,logout:z},se=Object(i.b)((function(e){return{boards:e.boards.boards,board:e.boards.board,loggedInUser:e.user.loggedInUser}}),oe)(re),ie=a(337);function le(){return r.a.createElement("div",{className:"loading-page flex column align-center justify-center"},r.a.createElement("h2",null," JUST A MOMENT :)"),r.a.createElement(ie.a,null))}var ce=a(49),ue=a(72),me=a.n(ue),pe=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={},a.onCopy=function(e,t){var n=Object(S.a)({},e),r=Object(S.a)({},t),o=F.getRandomId();n.id=o,t.columnOrder.push(o),n.taskIds.forEach((function(a){var o=F.getRandomId();r.tasks[o]=o;var s=Object(S.a)({},t.tasks[a],{id:o});r.tasks[o]=s;var i=e.taskIds.findIndex((function(e){return e===a}));n.taskIds=n.taskIds.splice(i,1,o)})),t.columns[o]=n,a.props.toggleTopMenuOptions(e.id)},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.column,a=this.props.board;return r.a.createElement("div",{className:"top-menu-options"},r.a.createElement("h2",{className:"text-center"},"options menu"),r.a.createElement("div",{className:"options-container flex column"},r.a.createElement("p",null,"rename list"),r.a.createElement("p",{onClick:function(){return e.onCopy(t,a)}},"copy"),r.a.createElement("p",{onClick:function(){return e.props.onDelete(t.id)}},"delete")))}}]),t}(n.Component),de=a(53),ge=a.n(de),he=a(43),fe=a.n(he),be={text:function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={elTop:0,elLeft:0,elHeight:0},a.toggleMiniDetails=function(e){e.stopPropagation();var t={task:a.props.task,left:a.refs.ref.getBoundingClientRect().left,top:a.refs.ref.getBoundingClientRect().top,height:a.refs.ref.getBoundingClientRect().height,previewType:"text",column:a.props.column};a.props.toggleMiniDetails(t)},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.task,n=t.provided,o=t.innerRef,s=t.isDragging,i=t.style,l=t.showEditBtn,c=t.onTaskId;return r.a.createElement("section",{ref:"ref"},r.a.createElement("div",Object.assign({className:"task-container"+(s?" isDragging":"")},n.draggableProps,n.dragHandleProps,{ref:o,style:i}),r.a.createElement("div",{className:"task-container-labels flex"},a.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" small-label"})}))),r.a.createElement("p",{className:"task-container-title"},a.title),r.a.createElement("div",{className:"flex align-center space-between"+(""==a.description?" row-reverse":"")},l&&c===a.id?r.a.createElement(ge.a,{className:"task-container-open-menu",onClick:function(t){return e.toggleMiniDetails(t)}}):"",""!==a.description?r.a.createElement(fe.a,null):"",r.a.createElement("div",{className:"flex"},a.taskTeamMembers.map((function(e){return r.a.createElement("div",{key:e._id,className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(e.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",{className:"flex align-center"},F.createUserIcon(e.firstName,e.lastName))))}))))))}}]),t}(n.Component),video:function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={elTop:0,elLeft:0,elHeight:0},a.toggleMiniDetails=function(e){e.stopPropagation();var t={task:a.props.task,left:a.refs.ref.getBoundingClientRect().left,top:a.refs.ref.getBoundingClientRect().top,height:a.refs.ref.getBoundingClientRect().height,previewType:"video",column:a.props.column};a.props.toggleMiniDetails(t)},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.task,n=t.provided,o=t.innerRef,s=t.isDragging,i=t.style,l=t.showEditBtn,c=t.onTaskId;return r.a.createElement("section",{ref:"ref"},r.a.createElement("div",Object.assign({className:"task-container flex column"+(s?" isDragging":"")},n.draggableProps,n.dragHandleProps,{ref:o,style:i}),r.a.createElement("iframe",{title:a.id,type:"text/html",width:"248",height:"140",allowFullScreen:"allowfullscreen",src:a.url,security:"restricted"}),r.a.createElement("div",{className:"task-container-labels flex"},a.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" small-label"})}))),r.a.createElement("p",{className:"task-container-title"},a.title),r.a.createElement("div",{className:"flex align-center space-between"+(""==a.description?" row-reverse":"")},l&&c===a.id?r.a.createElement(ge.a,{className:"task-container-open-menu",onClick:function(t){return e.toggleMiniDetails(t)}}):"",""!==a.description?r.a.createElement(fe.a,null):"",r.a.createElement("div",{className:"flex"},a.taskTeamMembers.map((function(e){return r.a.createElement("div",{key:e._id,className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(e.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",{className:"flex align-center"},F.createUserIcon(e.firstName,e.lastName))))}))))))}}]),t}(n.Component),image:function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={imgWidth:220,imgHeight:220,isMiniDetailsOn:!1,elTop:0,elLeft:0,elHeight:0},a.setNewState=function(e){var t=new Image;t.onload=function(e){if(t.width>t.height){var n=220/t.height,r=t.width>220?220:t.width;a.setState({imgWidth:r,imgHeight:t.height*n})}else{var o=220/t.width,s=t.height>220?220:t.height;a.setState({imgWidth:t.width*o,imgHeight:s})}},t.src=a.props.task.url},a.toggleMiniDetails=function(e){e.stopPropagation();var t={task:a.props.task,left:a.refs.ref.getBoundingClientRect().left,top:a.refs.ref.getBoundingClientRect().top,height:a.refs.ref.getBoundingClientRect().height,imgHeight:a.state.imgHeight,imgWidth:a.state.imgWidth,previewType:"image",column:a.props.column};a.props.toggleMiniDetails(t)},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setNewState()}},{key:"render",value:function(){var e=this,t=this.props,a=t.task,n=t.provided,o=t.innerRef,s=t.isDragging,i=t.style,l=t.showEditBtn,c=t.onTaskId;return r.a.createElement("section",{ref:"ref"},r.a.createElement("div",Object.assign({className:"task-container flex column align center"+(s?" isDragging":"")},n.draggableProps,n.dragHandleProps,{ref:o,style:i}),r.a.createElement("img",{title:a.id,alt:"task",width:this.state.imgWidth,height:this.state.imgHeight,src:a.url}),r.a.createElement("div",{className:"task-container-labels flex"},a.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" small-label"})}))),r.a.createElement("p",{className:"task-container-title"},a.title),r.a.createElement("div",{className:"flex align-center space-between"+(""==a.description?" row-reverse":"")},l&&c===a.id?r.a.createElement(ge.a,{className:"task-container-open-menu",onClick:function(t){return e.toggleMiniDetails(t)}}):"",""!==a.description?r.a.createElement(fe.a,null):"",r.a.createElement("div",{className:"flex"},a.taskTeamMembers.map((function(e){return r.a.createElement("div",{key:e._id,className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(e.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",{className:"flex align-center"},F.createUserIcon(e.firstName,e.lastName))))}))))))}}]),t}(n.Component)},ve=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={componentType:"text"},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({componentType:this.props.task.type})}},{key:"getComponent",value:function(){return be[this.state.componentType]}},{key:"render",value:function(){var e=this.getComponent();return r.a.createElement(r.a.Fragment,null,r.a.createElement(e,{column:this.props.column,provided:this.props.provided,innerRef:this.props.innerRef,task:this.props.task,isDragging:this.props.isDragging,style:this.props.style,onTaskId:this.props.onTaskId,showEditBtn:this.props.showEditBtn,toggleMiniDetails:this.props.toggleMiniDetails,user:this.props.user}))}}]),t}(n.Component),ke=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={showAddForm:!1,currTaskId:"",onTaskId:"",showTaskDetails:!1},a.toggleTaskDetails=function(e){e?a.setState((function(t){return{showTaskDetails:!t.showTaskDetails,currTaskId:e}})):a.setState((function(e){return{showTaskDetails:!e.showTaskDetails}}))},a.canOpenTaskDetails=function(e){return a.state.showTaskDetails&&a.state.currTaskId===e},a.showEditBtn=function(e){a.setState({showEditBtn:!0,onTaskId:e})},a.hideEditBtn=function(){a.setState({showEditBtn:!1})},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.tasks,n=t.provided,o=t.innerRef,s=t.isDraggingOver;return r.a.createElement("section",Object.assign({className:"task-list"+(s?" isDraggingOver":"")},n.droppableProps,{ref:o}),a.map((function(t,a){return r.a.createElement("div",{key:t.id},r.a.createElement(ce.b,{draggableId:t.id,index:a},(function(a,n){return r.a.createElement(me.a,{style:a.draggableProps.style,snapshot:n,rotationMultiplier:1.3},(function(o){return r.a.createElement("div",{onClick:function(a){return e.props.toggleTaskDetails({id:t.id,column:e.props.column})},onMouseEnter:function(){return e.showEditBtn(t.id)},onMouseLeave:function(){return e.hideEditBtn()}},r.a.createElement(ve,{provided:a,innerRef:a.innerRef,task:t,column:e.props.column,isDragging:n.isDragging,style:o,onTaskId:e.state.onTaskId,showEditBtn:e.state.showEditBtn,toggleMiniDetails:e.props.toggleMiniDetails,user:e.props.user}))}))})))})),n.placeholder)}}]),t}(n.Component),Ee=a(33),ye=a.n(Ee),Ne=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={column:{id:F.getRandomId(),title:"",taskIds:[]}},a.inputChange=function(e){var t=e.target.name,n=e.target.value;a.setState({column:Object(S.a)({},a.state.column,Object(B.a)({},t,n))})},a.saveColumn=function(e){e.preventDefault();var t=Object(S.a)({},a.props.board,{columns:Object(S.a)({},a.props.board.columns,Object(B.a)({},a.state.column.id,a.state.column))}),n=a.state.column.id,r=t.columnOrder;r.includes(n)||r.push(n),a.props.updateBoard(t),a.props.toggleAddForm();var o="'".concat(a.state.column.title,"' was added by ")+a.props.user;a.props.board.history.unshift({id:F.getRandomId(),msg:o,time:Date.now()}),F.emitNotification(o,"success")},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.nameInput.focus(),this.setFormDataForEdit()}},{key:"componentDidUpdate",value:function(e){e.column!==this.props.column&&this.setFormDataForEdit()}},{key:"setFormDataForEdit",value:function(){if(this.props.column){var e=this.props.column;this.setState({column:{id:e.id,title:e.title,taskIds:e.taskIds}})}}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"add-column-form-container flex column space-between",onSubmit:this.saveColumn},r.a.createElement("input",{ref:function(t){e.nameInput=t},type:"text",placeholder:"Column Name",name:"title",onChange:this.inputChange,value:this.state.column.title}),r.a.createElement("div",{className:"add-column flex"},r.a.createElement("button",{className:"add-column-save-btn",variant:"contained"},"SAVE"),r.a.createElement(ye.a,{className:"add-column-back-to-board flex align-center",onClick:this.props.toggleAddForm})))}}]),t}(n.Component),we=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={task:{id:F.getRandomId(),title:"",createdAt:Date.now(),dueDate:"",importance:"",description:"",type:"text",labels:[],creator:{},taskTeamMembers:[]},edit:!1},a.inputChange=function(e){var t=e.target.name,n=e.target.value;a.setState({task:Object(S.a)({},a.state.task,Object(B.a)({},t,n))})},a.save=function(e){e.preventDefault(),a.checkIfUrlAndSave(a.state.task.title)},a.saveTask=function(e){var t=Object(S.a)({},a.props.board,{tasks:Object(S.a)({},a.props.board.tasks,Object(B.a)({},a.state.task.id,a.state.task))}),n=a.props.column,r=a.state.task.id;n.taskIds.includes(r)||n.taskIds.push(r),a.props.updateBoard(t),a.props.closeUpdateForm(),a.props.toggleUpdateForm&&a.props.toggleUpdateForm(),a.props.toggleTaskDetails&&a.props.toggleTaskDetails();var o=a.state.edit?"".concat(a.props.user," edited the task '").concat(a.state.task.title,"'"):"The task '".concat(a.state.task.title,"' was added by ").concat(a.props.user);a.props.board.history.unshift({id:F.getRandomId(),msg:o,time:Date.now()}),F.emitNotification(o,"success")},a.textAreaAdjust=function(e){e.target.style.height="1px",e.target.style.height=25+e.target.scrollHeight+"px"},a.checkIfUrlAndSave=function(e){if(e.match(/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)){var t=e.replace("watch?v=","embed/");return a.setState((function(e){return{task:Object(S.a)({},e.task,{title:"",type:"video",url:t})}}),(function(e){a.saveTask()}))}if(e.match(/.(jpg|jpeg|png|gif)\/?$/))return a.setState((function(t){return{task:Object(S.a)({},t.task,{title:"",type:"image",url:e})}}),(function(e){a.saveTask()}));a.saveTask()},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.nameInput.focus(),this.setFormDataForEdit()}},{key:"componentDidUpdate",value:function(e){e.task!==this.props.task&&this.setFormDataForEdit()}},{key:"setFormDataForEdit",value:function(){if(this.props.task){var e=this.props.task;this.setState({task:{id:e.id,title:e.title,createdAt:e.createdAt,dueDate:e.dueDate,importance:e.importance,description:this.props.description,type:e.type,labels:e.labels,creator:e.creator,taskTeamMembers:e.taskTeamMembers},edit:!0})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"task-form"},r.a.createElement("form",{onSubmit:this.save},r.a.createElement("div",{className:"flex column"},r.a.createElement("textarea",{type:"text",onKeyUp:this.textAreaAdjust,placeholder:"Add a task title...",name:"title",ref:function(t){e.nameInput=t},onChange:this.inputChange,value:this.state.task.title}),r.a.createElement("div",{className:"flex align-center"},r.a.createElement("button",{className:"task-form-save-btn"},"SAVE"),r.a.createElement(ye.a,{className:"task-form-back-btn",onClick:function(){return e.props.closeUpdateForm()}})))))}}]),t}(n.Component),Oe=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={showAddColumnForm:!1,showTopMenuOptions:!1,showAddForm:!1,showEditBtn:!0,currColumnId:"",anchorEl:null,timer:null,title:""},a.toggleAddForm=function(e){a.setState((function(t){return{showForm:!t.showForm,currColumnId:e}}))},a.toggleTopMenuOptions=function(e){a.setState((function(t){return{showTopMenuOptions:!t.showTopMenuOptions,currColumnId:e}}))},a.onDelete=function(e){var t=Object(S.a)({},a.props.board),n=t.columnOrder,r=t.columns[e],o=!0,s=!1,i=void 0;try{for(var l,c=r.taskIds[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;for(var m in t.tasks)u===m&&delete t.tasks[m]}}catch(g){s=!0,i=g}finally{try{o||null==c.return||c.return()}finally{if(s)throw i}}delete t.columns[e];var p=n.findIndex((function(t){return t===e}));n.splice(p,1),a.props.updateBoard(t);var d="'".concat(r.title,"' was deleted by ").concat(a.props.user);a.props.board.history.unshift({id:F.getRandomId(),msg:d,time:Date.now()}),F.emitNotification(d,"danger")},a.onDragEnd=function(e){var t,n=e.destination,r=e.source,o=e.draggableId,s=e.type;if(n&&(n.droppableId!==r.droppableId||n.index!==r.index)){if("column"===s){var i=a.props.board.columnOrder.slice();i.splice(r.index,1),i.splice(n.index,0,o);var l=a.props.board.columns[o].title,c=Object(S.a)({},a.props.board,{columnOrder:i}),u="'".concat(l,"' was moved by ").concat(a.props.user);return a.props.board.history.unshift({id:F.getRandomId(),msg:u,time:Date.now()}),F.emitNotification(u,"success"),a.props.updateBoard(c)}var m=a.props.board.columns[r.droppableId],p=a.props.board.columns[n.droppableId];if(m===p){var d=m.taskIds.slice();d.splice(r.index,1),d.splice(n.index,0,o);var g=Object(S.a)({},m,{taskIds:d}),h=Object(S.a)({},a.props.board,{columns:Object(S.a)({},a.props.board.columns,Object(B.a)({},g.id,g))}),f=a.props.board.tasks[o].title,b="".concat(a.props.user," changed the position of the task '").concat(f,"'");return a.props.board.history.unshift({id:F.getRandomId(),msg:b,time:Date.now()}),F.emitNotification(b,"success"),a.props.updateBoard(h)}var v=m.taskIds.slice();v.splice(r.index,1);var k=Object(S.a)({},m,{taskIds:v}),E=p.taskIds.slice();E.splice(n.index,0,o);var y=Object(S.a)({},p,{taskIds:E});console.log("newStart",k.title),console.log("newFinish",y.title);var N=Object(S.a)({},a.props.board,{columns:Object(S.a)({},a.props.board.columns,(t={},Object(B.a)(t,k.id,k),Object(B.a)(t,y.id,y),t))}),w=a.props.board.tasks[o].title,O="".concat(a.props.user," moved the task '").concat(w,"' from '").concat(k.title,"' to '").concat(y.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:O,time:Date.now()}),F.emitNotification(O,"success"),a.props.updateBoard(N)}},a.handleCheck=function(e,t){clearTimeout(a.state.timer),a.setState({timer:setTimeout((function(){var n=Object(S.a)({},a.props.board);n.columns[e].title=t,a.props.updateBoard(n)}),1e3)})},a.emitChange=function(e,t){a.setState({title:e.target.innerText},(function(e){a.handleCheck(t,a.state.title)}))},a.openUpdateForm=function(e){a.setState({showAddForm:!0,currColumnId:e})},a.closeUpdateForm=function(e){a.setState({showAddForm:!1,currColumnId:e})},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ce.a,{onDragEnd:this.onDragEnd},r.a.createElement(ce.c,{droppableId:"all-columns",direction:"horizontal",type:"column"},(function(t){return r.a.createElement("div",Object.assign({className:"board-columns flex"},t.droppableProps,{ref:t.innerRef}),e.props.board.columnOrder.map((function(t,a){var n=e.props.board.columns[t],o=n.taskIds.map((function(t){return e.props.board.tasks[t]}));return r.a.createElement(ce.b,{draggableId:t,key:n.id,index:a},(function(t,a){return r.a.createElement(me.a,{style:t.draggableProps.style,snapshot:a,rotationMultiplier:1.3},(function(a){return r.a.createElement("div",Object.assign({className:"board-columns-item"},t.draggableProps,{ref:t.innerRef,style:a}),r.a.createElement("div",Object.assign({className:"board-columns-item-header flex align-center space-between"},t.dragHandleProps),r.a.createElement("div",{className:"board-columns-item-header-h2-wrapper"},r.a.createElement("h2",{contentEditable:"true",spellCheck:"false",onInput:function(t){return e.emitChange(t,n.id)},suppressContentEditableWarning:!0},n.title)),r.a.createElement("div",{className:"board-columns-item-header-menu-btn",onClick:function(){return e.toggleTopMenuOptions(n.id)}},r.a.createElement("h2",{className:"board-columns-item-header-menu-btn-icon"}," ... "))),e.state.showTopMenuOptions&&e.state.currColumnId===n.id?r.a.createElement(pe,{onDelete:e.onDelete,column:n,board:e.props.board,updateBoard:e.props.updateBoard,toggleTopMenuOptions:e.toggleTopMenuOptions}):"",e.state.showAddColumnForm&&e.state.currColumnId===n.id&&r.a.createElement(Ne,{board:e.props.board,toggleAddForm:e.toggleAddForm,column:n,updateBoard:e.props.updateBoard}),r.a.createElement(ce.c,{droppableId:n.id,type:"task"},(function(t,a){return r.a.createElement(ke,{board:e.props.board,innerRef:t.innerRef,provided:t,tasks:o,isDraggingOver:a.isDraggingOver,column:n,toggleTaskDetails:e.props.toggleTaskDetails,updateBoard:e.props.updateBoard,toggleMiniDetails:e.props.toggleMiniDetails,user:e.props.user})})),r.a.createElement("div",{className:"task-list-footer"},e.state.showAddForm||e.state.currColumnId!==n.id?e.state.currColumnId!==n.id?r.a.createElement("p",{className:"task-list-footer-add-task",onClick:function(){return e.openUpdateForm(n.id)}},"+ Add a task"):"":r.a.createElement("p",{className:"task-list-footer-add-task",onClick:function(){return e.openUpdateForm(n.id)}},"+ Add a task"),e.state.showAddForm&&e.state.currColumnId===n.id?r.a.createElement(we,{user:e.props.user,board:e.props.board,column:n,closeUpdateForm:e.closeUpdateForm,updateBoard:e.props.updateBoard}):""))}))}))})),t.placeholder)})))}}]),t}(n.Component),Ce=a(150),je=a.n(Ce),xe=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"boardhistory-container column"+(this.props.showHistory?" translateLeft":"")},r.a.createElement("div",{className:"members-container-colors-container flex column"},r.a.createElement("div",{className:"uppercase text-center"},r.a.createElement("h2",null,"board history :")),r.a.createElement("hr",null)),r.a.createElement("ul",{className:"clean-list"},this.props.history.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"msg"},e.msg,r.a.createElement("br",null),je()(e.time).calendar()),r.a.createElement("hr",null))}))))}}]),t}(n.Component),Te=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={currentBoardMembers:[],toggleUsersList:!1},a.componentDidMount=function(){a.setState({currentBoardMembers:a.props.board.teamMembers})},a.updateTeamMembers=function(e){var t=a.props.board,n=t.teamMembers;if(0===n.length){n.push(e);var r="".concat(e.username," was added to this board");a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),F.emitNotification(r,"success")}else if(n.find((function(t){return t._id===e._id}))){var o=n.findIndex((function(t){return t._id===e._id}));n.splice(o,1);var s="".concat(e.username," was removed from this board");a.props.board.history.unshift({id:F.getRandomId(),msg:s,time:Date.now()}),F.emitNotification(s,"danger")}else{n.push(e);var i="".concat(e.username," was added to this board");a.props.board.history.unshift({id:F.getRandomId(),msg:i,time:Date.now()}),F.emitNotification(i,"success")}a.setState({currentBoardMembers:n}),a.props.updateBoard(t)},a.toggleUsersList=function(){a.setState((function(e){return{toggleUsersList:!e.toggleUsersList}}))},a.onStopPropagation=function(e){e.stopPropagation()},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"board-team-members-container text-center column"+(this.props.toggleBoardTeamMembers?" translateLeft":""),onClick:function(t){return e.onStopPropagation(t)}},r.a.createElement("div",{className:"members-container-colors-container flex column"},r.a.createElement("div",{className:"pointer uppercase"},r.a.createElement("h2",null,"board members :")),r.a.createElement("hr",null),this.state.currentBoardMembers.map((function(e){return r.a.createElement("div",{key:e._id,className:"team-member flex align-center"},r.a.createElement("div",{className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(e.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",{className:"capitalize"},F.createUserIcon(e.firstName,e.lastName)))),r.a.createElement("span",{className:"capitalize"},e.firstName," ",e.lastName))}))),r.a.createElement("div",{className:"add-team-members flex column"},r.a.createElement("p",{className:"pointer uppercase",onClick:this.toggleUsersList},"add / remove users"),this.state.toggleUsersList&&this.props.users.map((function(t){return r.a.createElement("div",{key:t._id,className:"team-member flex align-center",onClick:function(){return e.updateTeamMembers(t)}},r.a.createElement("div",{className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(t.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",{className:"capitalize"},F.createUserIcon(t.firstName,t.lastName)))),r.a.createElement("span",{className:"capitalize"},t.firstName," ",t.lastName))}))))}}]),t}(n.Component),De=a(73),Be=a.n(De),Se=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={filterBy:{title:"",teamMembers:""}},a.inputChange=function(e){var t=e.target.name,n=e.target.value;console.log(t,n),a.setState((function(e){return{filterBy:Object(S.a)({},e.filterBy,Object(B.a)({},t,n))}}))},a.onFilterClick=function(){a.props.onFilter(a.state.filterBy)},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.teamMembers;return r.a.createElement("div",{className:"board-page-nav-bar-filters-item flex"},r.a.createElement("input",{type:"text",placeholder:"search task by name",value:this.state.filterBy.title,onChange:this.inputChange,name:"title"}),r.a.createElement("select",{name:"teamMembers",onChange:this.inputChange},r.a.createElement("option",{value:""},"All Team Members"),e.map((function(e){return r.a.createElement("option",{key:e._id,value:"".concat(e.username)},e.firstName," ",e.lastName)}))),r.a.createElement("button",{className:"board-page-nav-bar-filters nav-btn",onClick:this.onFilterClick},r.a.createElement(Be.a,{className:"flex"})))}}]),t}(n.Component),Ie=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={sortBy:"",sortOrder:"asc"},a.inputChange=function(e){var t=e.target.name,n=e.target.value;a.setState((function(e){return{filterBy:Object(S.a)({},e.filterBy,Object(B.a)({},t,n))}}))},a.onSortBy=function(e){var t=e.target.name,n="asc"===a.state.sortOrder?"desc":"asc";a.setState({sortBy:t,sortOrder:n},(function(){return a.props.onSort(a.state.sortBy,a.state.sortOrder)}))},a.toggleButtonName=function(){return"asc"===a.state.sortOrder?"Newest Tasks":"Oldest Tasks"},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"board-page-nav-bar-filters-item fill-height"},r.a.createElement("button",{className:"nav-btn fill-height",onClick:this.onSortBy,name:"createdAt"},this.toggleButtonName()))}}]),t}(n.Component),Me=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={splashImagesUrls:[],filterByName:""},a.inputChange=function(e){a.setState({filterByName:e.target.value+" wallpaper"})},a.onSave=function(){var e,t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.awrap(F.getImagesFromUnsplash(a.state.filterByName));case 3:e=n.sent,t=[],e.forEach((function(e){var a=t.findIndex((function(t){return t===e.urls.full}));a>=0?t.splice(a,1):t.push(e.urls.full)})),a.setState({splashImagesUrls:t}),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),null,null,[[0,9]])},a.setBoardBackground=function(e){var t=Object(S.a)({},a.props.board);t.boardBgImage=e.target.src,a.props.updateBoard(t);var n="".concat(a.props.user," changed background image");a.props.board.history.unshift({id:F.getRandomId(),msg:n,time:Date.now()}),F.emitNotification(n,"danger")},a.stopPropagation=function(e){e.stopPropagation()},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"splash-menu flex column align-center"+(this.props.toggleSplashMenu?" translateLeft":""),onClick:function(t){return e.stopPropagation(t)}},r.a.createElement("div",{className:"flex column fill-width"},r.a.createElement("div",{className:"splash-menu-search-bar fill-width flex justify-center"},r.a.createElement("input",{type:"text",placeholder:"Search by name...",onChange:this.inputChange}),r.a.createElement("button",{className:"splash-menu-search-bar-save-btn",onClick:this.onSave},r.a.createElement(Be.a,null))),r.a.createElement("button",{className:"splash-menu-search-bar-save-btn upload-btn"},r.a.createElement("input",{style:{display:"none"},type:"file",id:"upload-img",onChange:this.props.onAddImg}),r.a.createElement("label",{htmlFor:"upload-img"},"upload image"))),r.a.createElement("div",{className:"splash-images-container-wrapper"},r.a.createElement("div",{className:"splash-images-container flex wrap fill-width"},this.state.splashImagesUrls.map((function(t){return r.a.createElement("div",{key:t,className:"splash-images-container-item flex wrap"},r.a.createElement("img",{src:t,alt:"oops.. didn't found it",onClick:function(t){return e.setBoardBackground(t)}}))})))))}}]),t}(n.Component),Ae=a(151),Ue=a.n(Ae),Le=(a(258),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={dueDate:null},a.setDate=function(e){a.setState({dueDate:a.props.task.dueDate?new Date(a.props.task.dueDate):new Date})},a.handleChange=function(e){a.setState({dueDate:e})},a.saveTask=function(e){var t=Object(S.a)({},a.props.task,{dueDate:a.state.dueDate.getTime()}),n=Object(S.a)({},a.props.board,{tasks:Object(S.a)({},a.props.board.tasks,Object(B.a)({},t.id,t))});a.props.updateBoard(n)},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setDate()}},{key:"componentWillUnmount",value:function(){this.saveTask()}},{key:"render",value:function(){return r.a.createElement(Ue.a,{selected:this.state.dueDate,onChange:this.handleChange,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"Time",dateFormat:"MMMM d, yyyy h:mm aa"})}}]),t}(r.a.Component)),Fe=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={choosenLabels:[]},a.componentDidMount=function(){a.setNewState()},a.setNewState=function(){a.setState({choosenLabels:a.props.task.labels})},a.updateChoosenLabels=function(e){var t=e.target.classList[0],n=a.state.choosenLabels,r=n.findIndex((function(e){return e===t}));r>=0?n.splice(r,1):n.push(t),a.setState({choosenLabels:n},a.onSave)},a.onSave=function(){var e=Object(S.a)({},a.props.task,{labels:a.state.choosenLabels}),t=Object(S.a)({},a.props.board,{tasks:Object(S.a)({},a.props.board.tasks,Object(B.a)({},e.id,e))});a.props.updateBoard(t)},a.onStopPropagation=function(e){e.stopPropagation()},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=null;return this.props.miniTask&&(t={left:"12px",top:"36px"}),r.a.createElement("div",{className:"labels-container text-center",onClick:function(t){return e.onStopPropagation(t)},style:Object(S.a)({},t)},r.a.createElement(ye.a,{className:"labels-container-close-btn",onClick:this.props.toggleChooseLabels}),r.a.createElement("p",null,"CHOOSE LABELS"),r.a.createElement("hr",null),r.a.createElement("div",{className:"labels-container-colors-container flex column align-center "},r.a.createElement("div",{className:"label-color-1 large-label",onClick:function(t){return e.updateChoosenLabels(t)}}),r.a.createElement("div",{className:"label-color-2 large-label",onClick:function(t){return e.updateChoosenLabels(t)}}),r.a.createElement("div",{className:"label-color-3 large-label",onClick:function(t){return e.updateChoosenLabels(t)}}),r.a.createElement("div",{className:"label-color-4 large-label",onClick:function(t){return e.updateChoosenLabels(t)}}),r.a.createElement("div",{className:"label-color-5 large-label",onClick:function(t){return e.updateChoosenLabels(t)}}),r.a.createElement("div",{className:"label-color-6 large-label",onClick:function(t){return e.updateChoosenLabels(t)}})))}}]),t}(n.Component),Re=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={choosenMembers:[],availableMembers:[]},a.componentDidMount=function(){a.setNewState()},a.setNewState=function(){a.setState({choosenMembers:a.props.task.taskTeamMembers},a.setAvailableMembers)},a.setAvailableMembers=function(e){var t=a.props.board.teamMembers.filter((function(e){return!a.state.choosenMembers.find((function(t){return t._id===e._id}))}));a.setState({availableMembers:t},a.onSave)},a.updateChoosenMembers=function(e){var t=a.state.choosenMembers,n=t.findIndex((function(t){return t._id===e._id}));if(n>=0){t.splice(n,1);var r="".concat(e.username," was released from the task '").concat(a.props.task.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),F.emitNotification(r,"danger")}else{t.push(e);var o="".concat(e.username," was asigned to the task '").concat(a.props.task.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:o,time:Date.now()}),F.emitNotification(o,"success")}a.setState({choosenMembers:t},a.setAvailableMembers)},a.onSave=function(){var e=Object(S.a)({},a.props.task,{taskTeamMembers:a.state.choosenMembers}),t=Object(S.a)({},a.props.board,{tasks:Object(S.a)({},a.props.board.tasks,Object(B.a)({},e.id,e))});a.props.updateBoard(t)},a.onStopPropagation=function(e){e.stopPropagation()},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=null;return this.props.style&&(t={left:"10px",top:"72px"}),r.a.createElement("div",{className:"members-container text-center column",onClick:function(t){return e.onStopPropagation(t)},style:Object(S.a)({},t)},r.a.createElement(ye.a,{className:"members-container-close-btn",onClick:this.props.toggleChooseMembers}),r.a.createElement("p",null,"ASSIGNED MEMBERS"),r.a.createElement("hr",null),r.a.createElement("div",{className:"members-container-colors-container flex column"},this.props.task.taskTeamMembers.map((function(t){return r.a.createElement("div",{key:t._id,className:"team-member flex",onClick:function(){return e.updateChoosenMembers(t)}},r.a.createElement("div",{className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(t.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",null,F.createUserIcon(t.firstName,t.lastName)))),r.a.createElement("p",null,t.firstName),r.a.createElement("p",null,t.lastName))}))),r.a.createElement("div",{className:"add-team-members flex column"},r.a.createElement("p",null," ADD A TEAM MEMBER "),this.state.availableMembers.map((function(t){return r.a.createElement("div",{key:t._id,className:"team-member flex align-center",onClick:function(){return e.updateChoosenMembers(t)}},r.a.createElement("div",{className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(t.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",null,F.createUserIcon(t.firstName,t.lastName)))),r.a.createElement("p",null,t.firstName),r.a.createElement("p",null,t.lastName))}))))}}]),t}(n.Component),Pe=a(154),_e=a.n(Pe),He=a(157),We=a.n(He),Ve=a(155),Ge=a.n(Ve),ze=a(156),qe=a.n(ze),Je=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={description:"",showActivity:!1,showEditDescriptionForm:!1,teamMembers:[],deuDate:null,toggleChooseLabels:!1,choosenlabels:[],onToggleDueDate:!1,toggleChooseMembers:!1,choosenMembers:[]},a.emitChange=function(e){var t=e.target.value;a.setState({description:t})},a.toggleUpdateDescriptionForm=function(){a.setState((function(e){return{showEditDescriptionForm:!e.showEditDescriptionForm}}))},a.onToggleDueDate=function(e){e.stopPropagation(),a.setState((function(e){return{onToggleDueDate:!e.onToggleDueDate}}))},a.closeUpdateDescriptionForm=function(){a.setState({toggleUpdateDescriptionForm:!1})},a.onStopPropagationAndCloseOptions=function(e){e.stopPropagation(),a.setState({toggleChooseLabels:!1,toggleChooseMembers:!1})},a.toggleChooseLabels=function(e){e.stopPropagation(),a.setState((function(e){return{toggleChooseLabels:!e.toggleChooseLabels}}))},a.onSaveDescription=function(e){var t=Object(S.a)({},e,{description:a.state.description}),n=Object(S.a)({},a.props.board,{tasks:Object(S.a)({},a.props.board.tasks,Object(B.a)({},t.id,t))});a.props.updateBoard(n)},a.toggleChooseMembers=function(e){e.stopPropagation(),a.setState((function(e){return{toggleChooseMembers:!e.toggleChooseMembers}}))},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({description:this.props.board.tasks[this.props.taskId].description})}},{key:"render",value:function(){var e=this,t=this.props.board.tasks[this.props.taskId],a=this.props.column;return r.a.createElement("div",{className:"screen flex align-center justify-center",onClick:function(){return e.props.toggleTaskDetails()}},r.a.createElement("div",{className:"task-details-container flex",onClick:function(t){return e.onStopPropagationAndCloseOptions(t)}},r.a.createElement(ye.a,{className:"add-column-back-to-board   flex align-center",onClick:function(){return e.props.toggleTaskDetails()}}),r.a.createElement("div",{className:"task-details-container-main full"},r.a.createElement("header",{className:"task-details-container-header"},r.a.createElement("div",{className:"flex align-center"},r.a.createElement(_e.a,null),r.a.createElement("h2",null,t.title)),r.a.createElement("div",{className:"task-details-container-in-list flex"},r.a.createElement("p",{className:"flex"},'in list "',a.title,'"'))),r.a.createElement("div",{className:"task-details-container-labels-container"},this.state.toggleChooseLabels?r.a.createElement(Fe,{toggleChooseLabels:this.toggleChooseLabels,board:this.props.board,task:t,updateBoard:this.props.updateBoard}):"",t.labels.length?r.a.createElement("div",{className:"flex align-center"},r.a.createElement(Ge.a,null),r.a.createElement("h2",null,"Labels:")):"",r.a.createElement("div",{className:"labels-choosen-container flex"},t.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" medium-label"})})))),r.a.createElement("div",{className:"task-details-container-members-container"},this.state.toggleChooseMembers?r.a.createElement(Re,{toggleChooseMembers:this.toggleChooseMembers,board:this.props.board,task:t,updateBoard:this.props.updateBoard,users:this.props.users}):"",t.taskTeamMembers.length?r.a.createElement("div",{className:"flex align-center"},r.a.createElement(qe.a,null),r.a.createElement("h2",null,"Team members:")):"",r.a.createElement("div",{className:"members-choosen-container flex column"},t.taskTeamMembers.map((function(e){return r.a.createElement("div",{key:e._id,className:"flex"},r.a.createElement("div",{className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(e.color)}},r.a.createElement("div",{className:"team-member-icon flex align-center"},r.a.createElement("p",null,F.createUserIcon(e.firstName,e.lastName)))),r.a.createElement("p",{className:" flex align-center"},e.firstName),r.a.createElement("p",{className:" flex align-center"}," ",e.lastName))})))),r.a.createElement("div",{className:"task-details-container-main-description"},r.a.createElement("div",{className:"flex align-center"},r.a.createElement(We.a,null),r.a.createElement("h2",null,"Description")),r.a.createElement("div",{className:"flex column text-area-wrapper",onClick:this.toggleUpdateDescriptionForm},r.a.createElement("form",{onSubmit:this.save},r.a.createElement("textarea",{className:"fill-width",name:"description",rows:"3",cols:"40",onInput:this.emitChange,defaultValue:t.description,placeholder:"Add a more detailed description..."})),this.state.showEditDescriptionForm?r.a.createElement("div",{className:"flex align-center"},r.a.createElement("button",{className:"task-form-save-btn",onClick:function(){return e.onSaveDescription(t)}},"SAVE"),r.a.createElement(ye.a,{className:"task-form-back-btn",onClick:this.closeUpdateDescriptionForm})):"")),r.a.createElement("div",{className:"task-details-container-main-activity flex space-between"},r.a.createElement("div",{className:"flex align-center"},r.a.createElement(fe.a,null),r.a.createElement("h2",null,"Activity")),r.a.createElement("button",null,this.state.showActivity?"Show Activity":"Hide Activity"))),this.state.onToggleDueDate?r.a.createElement(Le,{task:t,onToggle:this.onToggleDueDate,board:this.props.board,updateBoard:this.props.updateBoard}):"",r.a.createElement("div",{className:"task-details-container-overall-options"},r.a.createElement("div",{className:"task-details-container-add-to-card-options-container"},r.a.createElement("p",{className:"text-center"},"ADD TO CARD"),r.a.createElement("div",{className:"task-details-container-add-to-card-options flex column"},r.a.createElement("button",{className:"task-details-container-add-to-card-options-btn btn",onClick:function(t){return e.toggleChooseMembers(t)}},"Members"),r.a.createElement("button",{className:"task-details-container-add-to-card-options-btn btn",onClick:function(t){return e.toggleChooseLabels(t)}},"Labels"),r.a.createElement("button",{className:"task-details-container-add-to-card-options-btn btn"},"Check List"),r.a.createElement("button",{className:"task-details-container-add-to-card-options-btn btn",onClick:function(t){return e.onToggleDueDate(t)}},"Due date"),r.a.createElement("button",{className:"task-details-container-add-to-card-options-btn btn"},"Image"),r.a.createElement("button",{className:"task-details-container-add-to-card-options-btn btn"},"Video"))),r.a.createElement("div",{className:"task-details-container-actions-options-container"},r.a.createElement("p",{className:"text-center"},"ACTIONS"),r.a.createElement("div",{className:"task-details-container-actions-options-actions flex column"},r.a.createElement("button",{className:"task-details-container-actions-options-btn btn"},"Move"),r.a.createElement("button",{className:"task-details-container-actions-options-btn btn"},"Copy"))))))}}]),t}(n.Component),$e=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.onClick;return r.a.createElement("div",{className:"mini-details-editor-button",onClick:a},r.a.createElement("p",null,t))}}]),t}(n.Component),Xe=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={onToggleLabels:!1,onToggleDueDate:!1,onToggleMembers:!1},a.onToggleLabels=function(e){a.setState((function(e){return{onToggleLabels:!e.onToggleLabels}}))},a.onToggleDueDate=function(e){a.setState((function(e){return{onToggleDueDate:!e.onToggleDueDate}}))},a.onToggleMembers=function(e){a.setState((function(e){return{onToggleMembers:!e.onToggleMembers}}))},a.onDelete=function(e){var t=a.props.miniTask,n=Object(S.a)({},a.props.board),r=a.props.miniTask.column.taskIds,o=n.tasks[t.task.id],s=r.findIndex((function(e){return e===t.task.id}));r.splice(s,1),delete n.tasks[t.task.id],a.props.updateBoard(n),a.props.onToggle();var i="'".concat(o.title,"' was deleted by ").concat(a.props.user);a.props.board.history.unshift({id:F.getRandomId(),msg:i,time:Date.now()}),F.emitNotification(i,"danger")},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.miniTask;return r.a.createElement("div",{className:"mini-details-editor",style:{left:e.left+265+"px",top:e.top+1+"px"}},r.a.createElement($e,{text:"\ud83d\udd8a\ufe0f Edit Labels",onClick:this.onToggleLabels}),this.state.onToggleLabels?r.a.createElement(Fe,{miniTask:e,task:e.task,toggleChooseLabels:this.onToggleLabels,board:this.props.board,updateBoard:this.props.updateBoard}):"",r.a.createElement($e,{text:"\ud83c\udfad Change Members",onClick:this.onToggleMembers}),this.state.onToggleMembers?r.a.createElement(Re,{style:!0,task:e.task,board:this.props.board,updateBoard:this.props.updateBoard,toggleChooseMembers:this.onToggleMembers,users:this.props.users}):"",r.a.createElement($e,{text:"\ud83d\udcc5 Due Date",onClick:this.onToggleDueDate}),this.state.onToggleDueDate?r.a.createElement(Le,{task:e.task,onToggle:this.onToggleDueDate,board:this.props.board,updateBoard:this.props.updateBoard}):"",r.a.createElement($e,{text:"\ud83d\uddd1\ufe0f Delete Task",onClick:this.onDelete}))}}]),t}(n.Component);function Ke(e){return r.a.createElement("div",{className:"screen-filter",onClick:function(t){return e.onToggle()}})}var Qe=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a.handleFocus=function(e){e.target.select()},a.emitChange=function(e){var t=e.target.value;a.setState({title:t})},a.onSave=function(e){var t=Object(S.a)({},a.props.miniTask.task,{title:a.state.title?a.state.title:a.props.miniTask.task.title}),n=Object(S.a)({},a.props.board,{tasks:Object(S.a)({},a.props.board.tasks,Object(B.a)({},t.id,t))});a.props.updateBoard(n),a.props.onToggle();var r="".concat(a.props.user," changed the title of the task '").concat(a.props.miniTask.task.title,"' to '").concat(a.state.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),F.emitNotification(r,"success")},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.refs.textarea.focus()}},{key:"render",value:function(){var e=this.props.miniTask,t=e.task.labels.length;return r.a.createElement("div",{className:"mini-details-container"},r.a.createElement("div",{className:"mini-details",style:{left:e.left+"px",top:e.top+"px",height:e.height+"px"}},r.a.createElement("div",{className:"task-container-labels flex"},e.task.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" small-label"})}))),r.a.createElement("textarea",{name:"title",className:"text-area"+(t>0?" preview-label":""),defaultValue:e.task.title,ref:"textarea",onFocus:this.handleFocus,onInput:this.emitChange,placeholder:"Add a task title..."})),r.a.createElement("button",{className:"mini-details-save-btn",style:{left:e.left+"px",top:e.top+e.height+10+"px"},onClick:this.onSave},"SAVE"),r.a.createElement(Xe,{users:this.props.users,user:this.props.user,miniTask:this.props.miniTask,board:this.props.board,updateBoard:this.props.updateBoard,onToggle:this.props.onToggle}),r.a.createElement(Ke,{onToggle:this.props.onToggle}))}}]),t}(n.Component),Ye=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a.handleFocus=function(e){e.target.select()},a.emitChange=function(e){var t=e.target.value;a.setState({title:t})},a.onSave=function(e){var t=Object(S.a)({},a.props.miniTask.task,{title:a.state.title?a.state.title:a.props.miniTask.task.title}),n=Object(S.a)({},a.props.board,{tasks:Object(S.a)({},a.props.board.tasks,Object(B.a)({},t.id,t))});a.props.updateBoard(n),a.props.onToggle();var r="".concat(a.props.user," updated the task '").concat(a.props.miniTask.task.title,"' to '").concat(a.state.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),F.emitNotification(r,"success")},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.refs.textarea.focus()}},{key:"render",value:function(){var e=this.props.miniTask;return r.a.createElement("div",{className:"mini-details-container"},r.a.createElement("div",{className:"mini-details",style:{left:e.left+"px",top:e.top+"px",height:e.height+"px"}},r.a.createElement("img",{title:e.task.id,alt:"task",width:e.imgWidth,height:e.imgHeight,src:e.task.url}),r.a.createElement("textarea",{name:"title",className:"text-area",style:{height:e.height-e.imgHeight-6,position:"relative"},defaultValue:e.task.title,ref:"textarea",onFocus:this.handleFocus,onInput:this.emitChange,placeholder:"Add a task title..."})),r.a.createElement("button",{className:"mini-details-save-btn",style:{left:e.left+"px",top:e.top+e.height+(e.task.title?10:32)+"px"},onClick:this.onSave},"SAVE"),r.a.createElement(Xe,{users:this.props.users,user:this.props.user,miniTask:this.props.miniTask,board:this.props.board,updateBoard:this.props.updateBoard,onToggle:this.props.onToggle}),r.a.createElement(Ke,{onToggle:this.props.onToggle}))}}]),t}(n.Component),Ze={text:Qe,video:function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a.handleFocus=function(e){e.target.select()},a.emitChange=function(e){var t=e.target.value;a.setState({title:t})},a.onSave=function(e){var t=Object(S.a)({},a.props.miniTask.task,{title:a.state.title?a.state.title:a.props.miniTask.task.title}),n=Object(S.a)({},a.props.board,{tasks:Object(S.a)({},a.props.board.tasks,Object(B.a)({},t.id,t))});a.props.updateBoard(n),a.props.onToggle();var r="".concat(a.props.user," updated the task '").concat(a.props.miniTask.task.title,"' to '").concat(a.state.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),F.emitNotification(r,"success")},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.refs.textarea.focus()}},{key:"render",value:function(){var e=this.props.miniTask,t=140,a=246;return r.a.createElement("div",{className:"mini-details-container"},r.a.createElement("div",{className:"mini-details",style:{left:e.left+"px",top:e.top+"px",height:e.height+"px"}},r.a.createElement("iframe",{title:e.task.id,type:"text/html",width:a,height:t,src:e.task.url,allowFullScreen:"allowfullscreen"}),r.a.createElement("textarea",{name:"title",className:"text-area",style:{height:e.height-t,position:"relative",bottom:"8px"},defaultValue:e.task.title,ref:"textarea",onFocus:this.handleFocus,onInput:this.emitChange,placeholder:"Add a task title..."})),r.a.createElement("button",{className:"mini-details-save-btn",style:{left:e.left+"px",top:e.top+e.height+(e.task.title?10:32)+"px"},onClick:this.onSave},"SAVE"),r.a.createElement(Xe,{users:this.props.users,user:this.props.user,miniTask:this.props.miniTask,board:this.props.board,updateBoard:this.props.updateBoard,onToggle:this.props.onToggle}),r.a.createElement(Ke,{onToggle:this.props.onToggle}))}}]),t}(n.Component),image:Ye},et=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={previewType:"text"},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({previewType:this.props.miniTask.previewType})}},{key:"getComponent",value:function(){return Ze[this.state.previewType]}},{key:"render",value:function(){var e=this.getComponent();return r.a.createElement(r.a.Fragment,null,r.a.createElement(e,{miniTask:this.props.miniTask,updateBoard:this.props.updateBoard,onToggle:this.props.onToggle,board:this.props.board,user:this.props.user,users:this.props.users}))}}]),t}(n.Component),tt=a(80),at=a.n(tt),nt=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={showAddColumn:!0,showForm:!1,showTaskDetails:!1,showMiniTaskDetails:!1,currTaskId:"",toggleUploadBgImg:!1,toggleLogin:!1,toggleSplashMenu:!1,showHistory:!1,toggleBoardTeamMembers:!1,miniTaskDetails:{},filterBy:{title:"",teamMembers:""},sortBy:"",sortOrder:""},a.loadBoard=function(){var e=a.props.match.params.id,t=a.state.filterBy,n=a.state.sortBy,r=a.state.sortOrder;a.props.loadBoard(e,t,n,r)},a.toggleAddForm=function(){a.setState((function(e){return{showForm:!e.showForm,showAddColumn:!e.showAddColumn}}))},a.goBack=function(){a.props.history.push("/")},a.toggleLogin=function(e){e.stopPropagation(),a.setState((function(e){return{toggleLogin:!e.toggleLogin,showHistory:!1,toggleBoardTeamMembers:!1,toggleSplashMenu:!1}}))},a.closeAllTabs=function(e){e.stopPropagation(),a.setState({toggleLogin:!1,toggleSplashMenu:!1,showHistory:!1,toggleBoardTeamMembers:!1})},a.toggleTaskDetails=function(e){void 0===e?a.setState((function(e){return{showTaskDetails:!e.showTaskDetails}})):a.state.showTaskDetails&&e.id!==a.state.currTask.id?a.setState({currTask:e}):a.setState((function(t){return{showTaskDetails:!t.showTaskDetails,currTask:e}}))},a.onAddImg=function(e){var t=e.target.files[0];F.uploadImg(t).then((function(e){var t=Object(S.a)({},a.props.board);t.boardBgImage=e,a.props.updateBoard(t),a.toggleUploadBgImg()}))},a.onFilter=function(e){a.setState({filterBy:e},a.loadBoard)},a.onSort=function(e,t){a.setState({sortBy:e,sortOrder:t},a.loadBoard)},a.toggleMiniDetails=function(e){if(e)return a.setState((function(t){return{showMiniTaskDetails:!t.showMiniTaskDetails,miniTaskDetails:e}}));a.setState((function(e){return{showMiniTaskDetails:!e.showMiniTaskDetails}}))},a.toggleSplashMenu=function(e){e.stopPropagation(),a.setState((function(e){return{toggleSplashMenu:!e.toggleSplashMenu,showHistory:!1,toggleBoardTeamMembers:!1,toggleLogin:!1}}))},a.toggleBoardHistory=function(e){e.stopPropagation(),a.setState((function(e){return{showHistory:!e.showHistory,toggleSplashMenu:!1,toggleBoardTeamMembers:!1,toggleLogin:!1}}))},a.toggleBoardTeamMembers=function(e){e.stopPropagation(),a.setState((function(e){return{toggleBoardTeamMembers:!e.toggleBoardTeamMembers,showHistory:!1,toggleSplashMenu:!1,toggleLogin:!1}}))},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getUsers(),this.props.getLoggedInUser(),this.loadBoard();var t=this.props.match.params.id;L.setup(),L.emit("boardId",t),L.on("updateBoard",(function(t){return e.props.setBoard(t)})),L.on("getNotification",(function(e){return l.store.addNotification(e)}))}},{key:"componentWillUnmount",value:function(){L.off("updateBoard"),L.off("getNotification"),L.terminate()}},{key:"render",value:function(){var e,t=this;return this.props.board.columns?(e=this.props.loggedInUser?r.a.createElement("button",{className:"board-page-nav-bar nav-btn",onClick:this.props.logout},"logout"):r.a.createElement("button",{className:"board-page-nav-bar nav-btn",onClick:function(e){return t.toggleLogin(e)}},"login"),r.a.createElement("div",{className:"screen",onClick:this.closeAllTabs},r.a.createElement("div",{className:"board-page fill-height flex column",style:{backgroundImage:"url("+this.props.board.boardBgImage+")"}},r.a.createElement("div",{className:"board-page-nav-bar flex space-between"},r.a.createElement("div",{className:"board-page-nav-bar-logo",onClick:this.goBack}," "),r.a.createElement("div",{className:"flex align-center"},this.props.loggedInUser&&r.a.createElement("p",{className:"logged-in-user"},"Logged in as: ",this.props.loggedInUser.username),e)),r.a.createElement("div",{className:"board-page-nav-bar-filters flex align-center space-between"},r.a.createElement("div",{className:"board-page-nav-bar-filters-item flex align-center"},r.a.createElement("button",{className:"board-page-nav-bar-filters nav-btn flex"},r.a.createElement(at.a,{onClick:this.goBack})),r.a.createElement(Se,{onFilter:this.onFilter,teamMembers:this.props.board.teamMembers}),r.a.createElement(Ie,{onSort:this.onSort})),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"board-page-nav-bar-filters-item fill-height"},r.a.createElement("button",{className:"nav-btn fill-height",onClick:this.toggleBoardTeamMembers},"Add Members To Board")),r.a.createElement("div",{className:"board-page-nav-bar-filters-item fill-height"},r.a.createElement("button",{className:"nav-btn fill-height",onClick:function(e){return t.toggleSplashMenu(e)}},"Change Background Image")),r.a.createElement("div",{className:"board-page-nav-bar-filters-item flex fill-height"},r.a.createElement("button",{className:"board-page-nav-bar-filters nav-btn",onClick:this.toggleBoardHistory},"Show Board History")))),r.a.createElement(Me,{toggleSplashMenu:this.state.toggleSplashMenu,board:this.props.board,updateBoard:this.props.updateBoard,toggleUploadBgImg:this.toggleUploadBgImg,onAddImg:this.onAddImg,showUploadBgImg:this.state.toggleUploadBgImg,user:this.props.loggedInUser?this.props.loggedInUser.username:"Guest"}),this.state.toggleLogin&&r.a.createElement(Q,{variant:"outlined",className:"home-page-login",toggleLogin:this.toggleLogin}),r.a.createElement("div",{className:"board-page-columns-container"},r.a.createElement("div",{className:"flex align-start fill-height"},r.a.createElement(Q,{variant:"outlined",className:"home-page-login",toggleLogin:this.toggleLogin,toggleState:this.state.toggleLogin}),r.a.createElement(Oe,{board:this.props.board,updateBoard:this.props.updateBoard,toggleTaskDetails:this.toggleTaskDetails,toggleMiniDetails:this.toggleMiniDetails,user:this.props.loggedInUser?this.props.loggedInUser.username:"Guest"}),r.a.createElement("div",{className:"flex column align-center"},this.state.showAddColumn?r.a.createElement("button",{className:"board-page-add-another-column-btn",onClick:this.toggleAddForm},"+ Add another list..  "):"",this.state.showForm&&r.a.createElement(Ne,{board:this.props.board,updateBoard:this.props.updateBoard,toggleAddForm:this.toggleAddForm,user:this.props.loggedInUser?this.props.loggedInUser.username:"Guest"})))),this.state.showTaskDetails&&r.a.createElement(Je,{taskId:this.state.currTask.id,board:this.props.board,column:this.state.currTask.column,updateBoard:this.props.updateBoard,toggleTaskDetails:this.toggleTaskDetails}),this.state.showMiniTaskDetails&&r.a.createElement(et,{miniTask:this.state.miniTaskDetails,updateBoard:this.props.updateBoard,onToggle:this.toggleMiniDetails,board:this.props.board,user:this.props.loggedInUser?this.props.loggedInUser.username:"Guest",users:this.props.users}),r.a.createElement(xe,{variant:"outlined",className:"home-page-login",history:this.props.board.history,showHistory:this.state.showHistory,toggleBoardHistory:this.toggleBoardHistory}),r.a.createElement(Te,{board:this.props.board,users:this.props.users,toggleBoardTeamMembers:this.state.toggleBoardTeamMembers,updateBoard:this.props.updateBoard})))):le()}}]),t}(n.Component),rt={loadBoard:ee,updateBoard:function(e){return function(t){return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t(ae(e)),a.next=4,g.a.awrap(Y.put(e));case 4:L.emit("boardUpdate",e),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("BoardActions: err in loadBoard",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])}},logout:z,getLoggedInUser:q,setBoard:function(e){return function(t){return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:try{t(te(e))}catch(n){console.log("BoardActions: err in setBoard",n)}case 1:case"end":return a.stop()}}))}},getUsers:function(){return function(e){var t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.a.awrap(G.getUsers());case 3:t=a.sent,e($(t)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("UserActions: err in getUsers",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])}}},ot=Object(i.b)((function(e){return{board:e.boards.board,loggedInUser:e.user.loggedInUser,users:e.user.users}}),rt)(nt),st=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={showAddColumn:!0,showForm:!1,isTaskDetailsOccupied:!1,toggleLogin:!1,miniTaskDetails:{},filterBy:{title:""},sortBy:"",sortOrder:""},a.toggleAddForm=function(){a.setState((function(e){return{showForm:!e.showForm,showAddColumn:!e.showAddColumn}}))},a.goBack=function(){a.props.history.push("/")},a.toggleLogin=function(e){e&&e.stopPropagation(),a.setState((function(e){return{toggleLogin:!e.toggleLogin}}))},a.closeLogin=function(e){e.stopPropagation(),a.setState({toggleLogin:!1})},a.toggleTaskDetails=function(e){void 0!==e?a.setState((function(t){return{showTaskDetails:!t.showTaskDetails,currTask:e}})):a.setState((function(e){return{showTaskDetails:!e.showTaskDetails}}))},a.onFilter=function(e){var t=a.props.match.params.id;a.props.loadBoard(t,e)},a.saveBoard=function(){var e,t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return delete(e=a.props.board)._id,e.createdBy=a.props.loggedInUser,n.next=5,g.a.awrap(a.props.createBoard(e));case 5:t=n.sent,a.props.history.push("/board/".concat(t._id));case 7:case"end":return n.stop()}}))},a}return Object(k.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(sessionStorage.getItem("board"));if(e)delete e._id,this.props.updateBoardOffline(e);else{var t=this.state.filterBy;this.props.loadBoard("5e2581b51c9d44000081af2a",t)}}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.props.board.columns?(this.props.loggedInUser?(e=r.a.createElement("button",{className:"board-page-login-btn"},r.a.createElement("div",{onClick:this.props.logout},"logout")),t=r.a.createElement("button",{className:"board-page-nav-bar-filters nav-btn",onClick:this.saveBoard},"SAVE BOARD")):e=r.a.createElement("button",{className:"board-page-nav-bar nav-btn"},r.a.createElement("div",{onClick:this.toggleLogin},"login")),this.props.loggedInUser&&(e=r.a.createElement("button",{className:"board-page-nav-bar nav-btn",onClick:this.props.logout},"logout")),r.a.createElement("div",{className:"board-page fill-height flex column",onClick:this.closeLogin},r.a.createElement("div",{className:"board-page-nav-bar flex space-between"},r.a.createElement("div",{className:"board-page-nav-bar-logo",onClick:this.goBack}," "),this.props.loggedInUser&&this.props.loggedInUser.username,e),r.a.createElement("div",{className:"board-page-nav-bar-filters flex align-center"},r.a.createElement("button",{className:"board-page-nav-bar-filters-item nav-btn flex"},r.a.createElement(at.a,{onClick:this.goBack})),t,r.a.createElement(Se,{onFilter:this.onFilter}),r.a.createElement(Ie,{onSort:this.onSort})),this.state.toggleLogin&&r.a.createElement(Q,{variant:"outlined",className:"home-page-login",toggleLogin:this.toggleLogin}),r.a.createElement("div",{className:"board-page-columns-container fill-height"},r.a.createElement("div",null,r.a.createElement("div",{className:"flex align-start"},r.a.createElement(Q,{variant:"outlined",className:"home-page-login",toggleLogin:this.toggleLogin,toggleState:this.state.toggleLogin}),r.a.createElement(Oe,{board:this.props.board,updateBoard:this.props.updateBoardOffline,toggleTaskDetails:this.toggleTaskDetails}),r.a.createElement("div",{className:"flex column align-center"},this.state.showAddColumn?r.a.createElement("button",{className:"board-page-add-another-column-btn",onClick:this.toggleAddForm},"+ Add another list..  "):"",this.state.showForm&&r.a.createElement(Ne,{board:this.props.board,updateBoard:this.props.updateBoardOffline,toggleAddForm:this.toggleAddForm}))))),this.state.showTaskDetails&&r.a.createElement(Je,{taskId:this.state.currTask.id,board:this.props.board,column:this.state.currTask.column,updateBoard:this.props.updateBoard,toggleTaskDetails:this.toggleTaskDetails}))):le();var e,t}}]),t}(n.Component),it={loadBoard:ee,updateBoardOffline:function(e){return function(t){return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:try{t(ae(e)),sessionStorage.setItem("board",JSON.stringify(e))}catch(n){console.log("BoardActions: err in loadBoard",n)}case 1:case"end":return a.stop()}}))}},createBoard:ne,logout:z},lt=Object(i.b)((function(e){return{board:e.boards.board,loggedInUser:e.user.loggedInUser}}),it)(st);var ct=function(){return r.a.createElement(u.b,{history:p},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",component:se,exact:!0}),r.a.createElement(u.a,{path:"/board/getstarted",component:lt,exact:!0}),r.a.createElement(u.a,{path:"/board/:id",component:ot,exact:!0})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(316);var ut=a(23),mt=a(158),pt=a(56),dt={boards:[],board:{}},gt={loggedInUser:null,users:[]},ht={isLoading:!1},ft=Object(ut.c)({boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_BOARDS":return Object(S.a)({},e,{boards:t.boards});case"SET_BOARD":case"UPDATE_BOARD":return Object(S.a)({},e,{board:t.board});case"ADD_BOARD":return Object(S.a)({},e,{boards:[].concat(Object(pt.a)(e.boards),[t.addedBoard])});default:return e}},system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(S.a)({},e,{isLoading:!0});case"LOADING_DONE":return Object(S.a)({},e,{isLoading:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(S.a)({},e,{loggedInUser:t.user});case"SET_USERS":return Object(S.a)({},e,{users:t.users});default:return e}}}),bt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ut.d,vt=Object(ut.e)(ft,bt(Object(ut.a)(mt.a)));s.a.render(r.a.createElement(i.a,{store:vt},r.a.createElement(c.a,null),r.a.createElement(ct,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[162,1,2]]]);
//# sourceMappingURL=main.51a01c0b.chunk.js.map