(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{164:function(e,t,a){e.exports=a(319)},174:function(e,t,a){},222:function(e,t){},319:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),s=a.n(o),i=a(31),l=a(70),c=a.n(l),u=a(71),p=a(35),d=a(24),m=Object(d.a)(),g=(a(174),a(12)),h=a.n(g),b=a(7),f=a(6),v=a(8),k=a(9),E=a(10),y=a(337),N=a(338),w=a(84),O=a.n(w),x=a(85),j=a.n(x);function C(e){var t=e.board;return r.a.createElement("div",{className:"board-preview card"},r.a.createElement("img",{style:{height:"100%",width:"100%",position:"absolute"},src:t.boardBgImage,alt:"none"}),r.a.createElement("div",null,r.a.createElement("h2",null,"click me!")))}var T,D=Object(p.f)((function(e){var t=e.boards.filter((function(e){return"5e2581b51c9d44000081af2a"!==e._id}));return r.a.createElement("section",{className:"boards-list flex column"},r.a.createElement("h2",{className:"text-center uppercase"}," check our beautiful boards"),r.a.createElement("div",{className:"boards-list-main-container fill-width"},r.a.createElement("div",{className:"boards-list-main-inner-container"},t.map((function(e){return r.a.createElement(u.b,{className:"boards-list-main-inner-container-item",key:e._id,to:"/board/".concat(e._id)},r.a.createElement(C,{board:e}))})))))})),I=a(11),B=a(4),S=a(60),M=a.n(S),A=a(147),U=a.n(A),L={setup:function(){T=U()("/")},terminate:function(){T=null},on:function(e,t){T.on(e,t)},off:function(e,t){T.off(e,t)},emit:function(e,t){T.emit(e,t)}};var F={getRandomId:function(){for(var e="1234567890poiiytreqwasdfghjklmnbvcxxssersgyushquiz",t="",a=0;a<10;a++){var n=Math.floor(Math.random()*e.length);t+=e[n]}return t},createUserIcon:function(e,t){return e.charAt(0)+t.charAt(0)},getRandomColor:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},uploadImg:function(e){var t="https://api.cloudinary.com/v1_1/".concat("dujlxvxxv","/image/upload"),a=new FormData;return a.append("file",e),a.append("upload_preset","xi62wuas"),M.a.post(t,a).then((function(e){return e.data})).then((function(e){return e.url})).catch((function(e){return console.error(e)}))},getImagesFromUnsplash:function(e){var t="https://api.unsplash.com/search/photos?query=".concat(e,"&client_id=").concat("9a992bf0a58ef7c4735758c98ec044dcdb524c2178db25d55cd773d7436f15d1");return M.a.get(t).then((function(e){return e.data})).then((function(e){return e.results})).catch((function(e){return console.error(e)}))},emitNotification:function(e,t){var a={message:e,type:t,insert:"top",container:"bottom-right",animationIn:["animated","zoomIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3}};L.emit("sendNotification",a)}};var R=M.a.create({withCredentials:!0}),P=function(e,t){return z(e,"GET",t)},H=function(e,t){return z(e,"POST",t)},_=function(e,t){return z(e,"PUT",t)},W=function(e,t){return z(e,"DELETE",t)};function z(e){var t,a,n,r=arguments;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:"get",a=r.length>2&&void 0!==r[2]?r[2]:null,o.prev=2,o.next=5,h.a.awrap(R({url:"".concat("/api/").concat(e),method:t,data:a}));case 5:return n=o.sent,o.abrupt("return",n.data);case 9:throw o.prev=9,o.t0=o.catch(2),console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(a)),console.dir(o.t0),o.t0.response&&401===o.t0.response.status&&m.push("/"),o.t0;case 15:case"end":return o.stop()}}),null,null,[[2,9]])}var G={login:function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(H("auth/login",e));case 3:return t=a.sent,a.abrupt("return",t);case 7:a.prev=7,a.t0=a.catch(0),console.log("UserService: err in login",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])},logout:function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.awrap(H("auth/logout"));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("UserService: err in logout",e.t0);case 8:case"end":return e.stop()}}),null,null,[[0,5]])},signup:function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(H("auth/signup",e));case 3:return t=a.sent,a.abrupt("return",t);case 7:a.prev=7,a.t0=a.catch(0),console.log("UserService: err in signup",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])},getLoggedInUser:function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.awrap(P("auth/user"));case 3:return e=t.sent,t.abrupt("return",e);case 7:t.prev=7,t.t0=t.catch(0),console.log("UserService: err in getting loggedInUser",t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])},getUsers:function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.awrap(P("user"));case 3:return e=t.sent,t.abrupt("return",e);case 7:t.prev=7,t.t0=t.catch(0),console.log("UserService: err in getting users",t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])}};function V(){return function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.awrap(G.logout());case 3:e($(null)),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in logout",t.t0);case 9:case"end":return t.stop()}}),null,null,[[0,6]])}}function q(){return function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(G.getLoggedInUser());case 3:t=a.sent,e($(t)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("UserActions: err in logout",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])}}function $(e){return{type:"SET_USER",user:e}}function J(e){return{type:"SET_USERS",users:e}}var X=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={msg:"",loginCred:{email:"",password:""},signupCred:{firstName:"",lastName:"",username:"",email:"",password:"",color:F.getRandomColor()}},a.loginHandleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{loginCred:Object(B.a)({},e.loginCred,Object(I.a)({},n,r))}}))},a.signupHandleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{signupCred:Object(B.a)({},e.signupCred,Object(I.a)({},n,r))}}))},a.doLogin=function(e){var t,n,r,o;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.preventDefault(),t=a.state.loginCred,n=t.email,r=t.password,n&&r){s.next=4;break}return s.abrupt("return",a.setState({msg:"Please enter user/password"}));case 4:o={email:n,password:r},a.props.login(o),a.setState({loginCred:{email:"",password:""}});case 7:case"end":return s.stop()}}))},a.doSignup=function(e){var t,n,r,o,s,i,l,c;return h.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e.preventDefault(),t=a.state.signupCred,n=t.firstName,r=t.lastName,o=t.username,s=t.email,i=t.password,l=t.color,n&&r&&s&&i&&o){u.next=4;break}return u.abrupt("return",a.setState({msg:"All inputs are required!"}));case 4:c={firstName:n,lastName:r,username:o,email:s,password:i,color:l},a.props.signup(c),a.setState({signupCred:{firstName:"",lastName:"",username:"",email:"",password:""}}),a.props.toggleLogin();case 8:case"end":return u.stop()}}))},a.doLogout=function(){a.props.logout()},a.doStopPropagation=function(e){e.stopPropagation()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.getLoggedInUser()}},{key:"render",value:function(){var e=r.a.createElement("form",{className:"login-container-signup text-center",onSubmit:this.doSignup},r.a.createElement("p",null,"Not a member yet? Sign up!"),r.a.createElement("input",{type:"text",name:"firstName",value:this.state.signupCred.firstName,onChange:this.signupHandleChange,placeholder:"First Name"}),r.a.createElement("input",{type:"text",name:"lastName",value:this.state.signupCred.lastName,onChange:this.signupHandleChange,placeholder:"Last Name"}),r.a.createElement("input",{type:"text",name:"email",value:this.state.signupCred.email,onChange:this.signupHandleChange,placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username"}),r.a.createElement("br",null),r.a.createElement("input",{name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",{className:"login-container-signup-btn"},"Signup")),t=r.a.createElement("form",{className:"login-container-login text-center",onSubmit:this.doLogin},r.a.createElement("p",null," Login: "),r.a.createElement("input",{type:"text",name:"email",value:this.state.loginCred.email,onChange:this.loginHandleChange,placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",{className:"login-container-login-btn"},"Login")),a=this.props.loggedInUser;return r.a.createElement("div",{className:"login-container flex column align-center"+(this.props.toggleState?" translateLeft":""),style:this.props.style,onClick:this.doStopPropagation},r.a.createElement("div",{className:"login-container-logo"}),r.a.createElement("h2",null,this.state.msg),r.a.createElement("div",{className:"login-container-form-container"},a&&r.a.createElement("div",null,r.a.createElement("h2",{className:"login-container-loggedin-username"}," ",r.a.createElement("p",null,"Welcome!")," ",a.username," "),r.a.createElement("div",{className:"fill-width flex"},r.a.createElement("button",{className:"login-container-form-container-logout",onClick:this.doLogout},"Logout"))),!this.props.loggedInUser&&t,r.a.createElement("hr",null),!this.props.loggedInUser&&e))}}]),t}(n.Component),K={login:function(e){return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(G.login(e));case 3:a=n.sent,t($(a)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("UserActions: err in login",n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},logout:V,signup:function(e){return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(G.signup(e));case 3:a=n.sent,t($(a)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("UserActions: err in signup",n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},getLoggedInUser:q},Q=Object(i.b)((function(e){return{users:e.user.users,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),K)(X),Y={add:function(e){return H("board",e)},query:function(){return P("board")},get:function(e,t,a,n){return P("board/".concat(e,"?").concat(function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")}(t),"&sortby=").concat(a,"&sortorder=").concat(n))},put:function(e){return _("board/".concat(e._id),e)},remove:function(e){return W("board/".concat(e))}};function Z(e){return{type:"SET_BOARDS",boards:e}}function ee(e,t,a,n){return function(r){var o;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,h.a.awrap(Y.get(e,t,a,n));case 3:o=s.sent,r(te(o)),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log("BoardActions: err in loadBoard",s.t0);case 10:case"end":return s.stop()}}),null,null,[[0,7]])}}function te(e){return{type:"SET_BOARD",board:e}}function ae(e){return{type:"UPDATE_BOARD",board:e}}var ne=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={toggleLogin:!1},a.toggleLogin=function(e){e&&e.stopPropagation(),a.setState((function(e){return{toggleLogin:!e.toggleLogin}}))},a.closeLogin=function(e){e.stopPropagation(),a.setState({toggleLogin:!1})},a.createBoard=function(){var e,t,n,r;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=a.props.board,t=a.props.loggedInUser?a.props.loggedInUser.username:"Guest",n="The Board was created by ".concat(t),delete e._id,e.createdBy=a.props.loggedInUser,e.history=[{id:F.getRandomId(),msg:n,time:Date.now()}],o.next=8,h.a.awrap(a.props.createBoard(e));case 8:r=o.sent,a.props.history.push("/board/".concat(r._id));case 10:case"end":return o.stop()}}))},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.loadBoards();this.props.loadBoard("5e2581b51c9d44000081af2a",{title:""})}},{key:"render",value:function(){var e;return e=this.props.loggedInUser?r.a.createElement(y.a,{className:"home-page-login-btn"},r.a.createElement("div",{onClick:this.props.logout},"logout")):r.a.createElement(y.a,{className:"home-page-login-btn"},r.a.createElement("div",{onClick:this.toggleLogin},"login")),r.a.createElement("div",{className:"home-page",onClick:this.closeLogin},r.a.createElement("section",{className:"home-page-header"},r.a.createElement("div",{className:"home-page-login flex justify-end align-center"},this.props.loggedInUser&&r.a.createElement("p",{className:"flex column"},r.a.createElement("small",null,"welcome!"),this.props.loggedInUser.username),e),r.a.createElement(Q,{className:"home-page-login",toggleLogin:this.toggleLogin,toggleState:this.state.toggleLogin}),r.a.createElement("div",{className:"home-page-header-container flex"},r.a.createElement("div",{className:"header-image flex align-center justify-center fill-width fill-height"},r.a.createElement("div",{className:"login-get-started-container flex align-center justify-center align-center"},r.a.createElement("div",{className:"home-page-logo-get-started flex column align-center"},r.a.createElement("div",{className:"home-page-header-container-logo-img fill-width fill-height"}),r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",null,"Manage your tasks in a fun and easy way")),r.a.createElement("div",{className:"get-started-btn"},r.a.createElement(N.a,{variant:"extended"},r.a.createElement("p",{className:"uppercase",onClick:this.createBoard},"get started")))))))),r.a.createElement("section",{className:"home-page-boards-list flex colum"},r.a.createElement("div",{className:"home-page-boards-list-img-wrapper"},r.a.createElement("div",{className:"home-page-boards-list-img"})),r.a.createElement("div",{className:"home-page-boards-list-start-new-board flex column align-center"},r.a.createElement("p",{className:"home-page-boards-list-start-new-board-right-text"},"We, in Trebello, believe that simplicity and style must go together, that's why we made our brand simple and easy to use for everyone.",r.a.createElement("br",null)," ",r.a.createElement("br",null),"Organize your team and take them one step ahead."))),r.a.createElement(D,{boards:this.props.boards}),r.a.createElement("section",{className:"home-page-footer flex column align-center justify-center"},r.a.createElement("h2",null," OUR TEAM "),r.a.createElement("div",{className:"home-pagge-footer-team-members-cards-container flex justify-center"},r.a.createElement("div",{className:"home-page-footer-team-member-card flex column align-center justify-center"},r.a.createElement("div",{className:"home-page-footer-team-member-card-member-img vlad"}),r.a.createElement("p",null,"Vlad Batalin"),r.a.createElement("small",null,"Design and overall technical support"),r.a.createElement("div",{className:"flex"},r.a.createElement(O.a,{className:"linkedInIcon"}),r.a.createElement(j.a,{className:"faceBookIcon"}))),r.a.createElement("div",{className:"home-page-footer-team-member-card flex column align-center justify-center"},r.a.createElement("div",{className:"home-page-footer-team-member-card-member-img margad"}),r.a.createElement("p",null,"Margad Taikhir"),r.a.createElement("small",null,"High functionality backend support"),r.a.createElement("div",{className:"flex"},r.a.createElement(O.a,{className:"linkedInIcon"}),r.a.createElement(j.a,{className:"faceBookIcon"}))),r.a.createElement("div",{className:"home-page-footer-team-member-card flex column align-center justify-center"},r.a.createElement("div",{className:"home-page-footer-team-member-card-member-img paolo"}),r.a.createElement("p",null,"Paolo Groppi"),r.a.createElement("small",null,"High functionality and backend"),r.a.createElement("div",{className:"flex"},r.a.createElement("a",{href:"https://www.linkedin.com/in/paolo-groppi-6ba84117b",target:"blank"},r.a.createElement(O.a,{className:"linkedInIcon"})),r.a.createElement("a",{href:"https://www.facebook.com/karma.tova",target:"blank"},r.a.createElement(j.a,{className:"faceBookIcon"})))))))}}]),t}(n.Component),re={loadBoards:function(){return function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(Y.query());case 3:t=a.sent,e(Z(t)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("BoardActions: err in loadBoards",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])}},loadBoard:ee,createBoard:function(e){return function(a){var n;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.a.awrap(Y.add(e));case 3:return n=r.sent,a(t(n)),r.abrupt("return",n);case 8:r.prev=8,r.t0=r.catch(0),console.log("BoardActions: err in createBoard",r.t0);case 11:case"end":return r.stop()}}),null,null,[[0,8]])};function t(e){return{type:"ADD_BOARD",addedBoard:e}}},logout:V},oe=Object(i.b)((function(e){return{boards:e.boards.boards,board:e.boards.board,loggedInUser:e.user.loggedInUser}}),re)(ne),se=a(339);var ie=a(49),le=a(72),ce=a.n(le),ue=a(43),pe=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).onDuplicateColumn=function(){var e=a.props.column,t=a.props.board,n=Object(B.a)({},a.props.column),r=F.getRandomId(),o=t.columnOrder.findIndex((function(t){return t===e.id}));n.id=r,t.columnOrder.splice(o+1,0,n.id),n.taskIds.forEach((function(a){var r=F.getRandomId(),o=e.taskIds.findIndex((function(e){return e===a}));t.tasks[r]=Object(B.a)({},t.tasks[a],{id:r}),n.taskIds=Object(ue.a)(n.taskIds),n.taskIds.splice(o,1,r)})),t.columns[r]=n,a.props.toggleTopMenuOptions(e.id);var s="'".concat(e.title,"' was duplicated by ").concat(a.props.user);a.props.board.history.unshift({id:F.getRandomId(),msg:s,time:Date.now()}),a.props.updateBoard(t,s,"success")},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"top-menu-options"},r.a.createElement("h2",{className:"text-center capitalize"},"options menu"),r.a.createElement("div",{className:"options-container flex column"},r.a.createElement("p",{className:"capitalize",onClick:this.onDuplicateColumn},"duplicate list"),r.a.createElement("p",{className:"capitalize",onClick:function(){return e.props.onDelete(e.props.column.id)}},"delete list")))}}]),t}(n.Component),de=a(53),me=a.n(de),ge=a(54),he=a.n(ge),be={text:function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(v.a)(this,Object(k.a)(t).call(this,e))).toggleMiniDetails=function(e){e.stopPropagation();var t={task:a.props.task,boundingClientRect:a.taskContainer.current.getBoundingClientRect(),previewType:"text",column:a.props.column};a.props.toggleMiniDetails(t)},a.taskContainer=r.a.createRef(),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.task,n=t.provided,o=t.innerRef,s=t.isDragging,i=t.style,l=t.showEditBtn,c=t.onTaskId;return r.a.createElement("section",{ref:this.taskContainer},r.a.createElement("div",Object.assign({className:"task-container"+(s?" isDragging":"")},n.draggableProps,n.dragHandleProps,{ref:o,style:i}),r.a.createElement("div",{className:"task-container-labels flex"},a.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" small-label"})}))),r.a.createElement("p",{className:"task-container-title"},a.title),r.a.createElement("div",{className:"flex align-center space-between"+(""===a.description?" row-reverse":"")},l&&c===a.id?r.a.createElement(me.a,{className:"task-container-open-menu",onClick:function(t){return e.toggleMiniDetails(t)}}):"",""!==a.description?r.a.createElement(he.a,null):"",r.a.createElement("div",{className:"flex"},a.taskTeamMembers.map((function(e){return r.a.createElement("div",{key:e._id,className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(e.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",{className:"flex align-center"},F.createUserIcon(e.firstName,e.lastName))))}))))))}}]),t}(n.Component),video:function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(v.a)(this,Object(k.a)(t).call(this,e))).toggleMiniDetails=function(e){e.stopPropagation();var t={task:a.props.task,boundingClientRect:a.videoContainer.current.getBoundingClientRect(),previewType:"video",column:a.props.column};a.props.toggleMiniDetails(t)},a.videoContainer=r.a.createRef(),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.task,n=t.provided,o=t.innerRef,s=t.isDragging,i=t.style,l=t.showEditBtn,c=t.onTaskId;return r.a.createElement("section",{ref:this.videoContainer},r.a.createElement("div",Object.assign({className:"task-container flex column"+(s?" isDragging":"")},n.draggableProps,n.dragHandleProps,{ref:o,style:i}),r.a.createElement("iframe",{title:a.id,type:"text/html",width:"248",height:"140",allowFullScreen:"allowfullscreen",src:a.url,security:"restricted"}),r.a.createElement("div",{className:"task-container-labels flex"},a.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" small-label"})}))),r.a.createElement("p",{className:"task-container-title"},a.title),r.a.createElement("div",{className:"flex align-center space-between"+(""===a.description?" row-reverse":"")},l&&c===a.id?r.a.createElement(me.a,{className:"task-container-open-menu",onClick:function(t){return e.toggleMiniDetails(t)}}):"",""!==a.description?r.a.createElement(he.a,null):"",r.a.createElement("div",{className:"flex"},a.taskTeamMembers.map((function(e){return r.a.createElement("div",{key:e._id,className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(e.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",{className:"flex align-center"},F.createUserIcon(e.firstName,e.lastName))))}))))))}}]),t}(n.Component),image:function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(v.a)(this,Object(k.a)(t).call(this,e))).toggleMiniDetails=function(e){e.stopPropagation();var t={task:a.props.task,boundingClientRect:a.imgContainer.current.getBoundingClientRect(),previewType:"image",column:a.props.column};a.props.toggleMiniDetails(t)},a.imgContainer=r.a.createRef(),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.task,n=t.provided,o=t.innerRef,s=t.isDragging,i=t.style,l=t.showEditBtn,c=t.onTaskId;return r.a.createElement("section",{ref:this.imgContainer},r.a.createElement("div",Object.assign({className:"task-container flex column align center"+(s?" isDragging":"")},n.draggableProps,n.dragHandleProps,{ref:o,style:i}),r.a.createElement("img",{title:a.id,alt:"task",src:a.url}),r.a.createElement("div",{className:"task-container-labels flex"},a.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" small-label"})}))),r.a.createElement("p",{className:"task-container-title"},a.title),r.a.createElement("div",{className:"flex align-center space-between"+(""===a.description?" row-reverse":"")},l&&c===a.id?r.a.createElement(me.a,{className:"task-container-open-menu",onClick:function(t){return e.toggleMiniDetails(t)}}):"",""!==a.description?r.a.createElement(he.a,null):"",r.a.createElement("div",{className:"flex"},a.taskTeamMembers.map((function(e){return r.a.createElement("div",{key:e._id,className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(e.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",{className:"flex align-center"},F.createUserIcon(e.firstName,e.lastName))))}))))))}}]),t}(n.Component)},fe=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={componentType:"text"},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({componentType:this.props.task.type})}},{key:"getComponent",value:function(){return be[this.state.componentType]}},{key:"render",value:function(){var e=this.getComponent();return r.a.createElement(r.a.Fragment,null,r.a.createElement(e,{column:this.props.column,provided:this.props.provided,innerRef:this.props.innerRef,task:this.props.task,isDragging:this.props.isDragging,style:this.props.style,onTaskId:this.props.onTaskId,showEditBtn:this.props.showEditBtn,toggleMiniDetails:this.props.toggleMiniDetails,user:this.props.user}))}}]),t}(n.Component),ve=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={showAddForm:!1,currTaskId:"",onTaskId:"",showTaskDetails:!1},a.toggleTaskDetails=function(e){e?a.setState((function(t){return{showTaskDetails:!t.showTaskDetails,currTaskId:e}})):a.setState((function(e){return{showTaskDetails:!e.showTaskDetails}}))},a.canOpenTaskDetails=function(e){return a.state.showTaskDetails&&a.state.currTaskId===e},a.showEditBtn=function(e){a.setState({showEditBtn:!0,onTaskId:e})},a.hideEditBtn=function(){a.setState({showEditBtn:!1})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.tasks,n=t.provided,o=t.innerRef,s=t.isDraggingOver;return r.a.createElement("section",Object.assign({className:"task-list"+(s?" isDraggingOver":"")},n.droppableProps,{ref:o}),a.map((function(t,a){return r.a.createElement("div",{key:t.id},r.a.createElement(ie.b,{draggableId:t.id,index:a},(function(a,n){return r.a.createElement(ce.a,{style:a.draggableProps.style,snapshot:n,rotationMultiplier:1.3},(function(o){return r.a.createElement("div",{onClick:function(a){return e.props.toggleTaskDetails({id:t.id,column:e.props.column})},onMouseEnter:function(){return e.showEditBtn(t.id)},onMouseLeave:function(){return e.hideEditBtn()}},r.a.createElement(fe,{provided:a,innerRef:a.innerRef,task:t,column:e.props.column,isDragging:n.isDragging,style:o,onTaskId:e.state.onTaskId,showEditBtn:e.state.showEditBtn,toggleMiniDetails:e.props.toggleMiniDetails,user:e.props.user}))}))})))})),n.placeholder)}}]),t}(n.Component),ke=a(19),Ee=a.n(ke),ye=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={task:{id:F.getRandomId(),title:"",createdAt:Date.now(),dueDate:"",importance:"",description:"",type:"text",labels:[],todos:[],creator:{},taskTeamMembers:[]},edit:!1},a.inputChange=function(e){var t=e.target.name,n=e.target.value;a.setState({task:Object(B.a)({},a.state.task,Object(I.a)({},t,n))})},a.save=function(e){e.preventDefault(),a.checkIfUrlAndSave(a.state.task.title)},a.checkIfUrlAndSave=function(e){if(e.match(/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)){var t=e.replace("watch?v=","embed/");return a.setState((function(e){return{task:Object(B.a)({},e.task,{title:"",type:"video",url:t})}}),(function(e){a.saveTask()}))}if(e.match(/.(jpg|jpeg|png|gif)\/?$/))return a.setState((function(t){return{task:Object(B.a)({},t.task,{title:"",type:"image",url:e})}}),(function(e){a.saveTask()}));a.saveTask()},a.saveTask=function(e){var t=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},a.state.task.id,a.state.task))}),n=a.props.column,r=a.state.task.id;n.taskIds.includes(r)||n.taskIds.push(r);var o=a.state.edit?"".concat(a.props.user," edited the task '").concat(a.state.task.title,"'"):"The task '".concat(a.state.task.title,"' was added by ").concat(a.props.user);a.props.board.history.unshift({id:F.getRandomId(),msg:o,time:Date.now()}),a.props.updateBoard(t,o,"success"),a.props.closeUpdateForm(),a.props.toggleUpdateForm&&a.props.toggleUpdateForm(),a.props.toggleTaskDetails&&a.props.toggleTaskDetails()},a.textAreaAdjust=function(e){e.target.style.height="1px",e.target.style.height=25+e.target.scrollHeight+"px"},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.nameInput.focus(),this.setFormDataForEdit()}},{key:"componentDidUpdate",value:function(e){e.task!==this.props.task&&this.setFormDataForEdit()}},{key:"setFormDataForEdit",value:function(){if(this.props.task){var e=this.props.task;this.setState({task:{id:e.id,title:e.title,createdAt:e.createdAt,dueDate:e.dueDate,importance:e.importance,description:this.props.description,type:e.type,labels:e.labels,todos:e.todos,creator:e.creator,taskTeamMembers:e.taskTeamMembers},edit:!0})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"task-form"},r.a.createElement("form",{onSubmit:this.save,onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"flex column"},r.a.createElement("textarea",{type:"text",onKeyUp:this.textAreaAdjust,placeholder:"Add a task title...",name:"title",ref:function(t){e.nameInput=t},onChange:this.inputChange,value:this.state.task.title}),r.a.createElement("div",{className:"flex align-center"},r.a.createElement("button",{className:"task-form-save-btn save"},"save"),r.a.createElement(Ee.a,{className:"task-form-back-btn",onClick:function(t){t.stopPropagation(),e.props.closeUpdateForm()}})))))}}]),t}(n.Component),Ne=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={timer:null,title:""},a.onDelete=function(e){var t=Object(B.a)({},a.props.board),n=t.columnOrder,r=t.columns[e],o=!0,s=!1,i=void 0;try{for(var l,c=r.taskIds[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;for(var p in t.tasks)u===p&&delete t.tasks[p]}}catch(g){s=!0,i=g}finally{try{o||null==c.return||c.return()}finally{if(s)throw i}}delete t.columns[e];var d=n.findIndex((function(t){return t===e}));n.splice(d,1);var m="'".concat(r.title,"' was deleted by ").concat(a.props.user);a.props.updateBoard(t,m,"danger"),a.props.board.history.unshift({id:F.getRandomId(),msg:m,time:Date.now()})},a.onDragEnd=function(e){var t,n=e.destination,r=e.source,o=e.draggableId,s=e.type;if(n&&(n.droppableId!==r.droppableId||n.index!==r.index)){if("column"===s){var i=a.props.board.columnOrder.slice();i.splice(r.index,1),i.splice(n.index,0,o);var l=a.props.board.columns[o].title,c=Object(B.a)({},a.props.board,{columnOrder:i}),u="'".concat(l,"' was moved by ").concat(a.props.user);return a.props.board.history.unshift({id:F.getRandomId(),msg:u,time:Date.now()}),a.props.updateBoard(c,u,"success")}var p=a.props.board.columns[r.droppableId],d=a.props.board.columns[n.droppableId];if(p===d){var m=p.taskIds.slice();m.splice(r.index,1),m.splice(n.index,0,o);var g=Object(B.a)({},p,{taskIds:m}),h=Object(B.a)({},a.props.board,{columns:Object(B.a)({},a.props.board.columns,Object(I.a)({},g.id,g))}),b=a.props.board.tasks[o].title,f="".concat(a.props.user," changed the position of the task '").concat(b,"'");return a.props.board.history.unshift({id:F.getRandomId(),msg:f,time:Date.now()}),a.props.updateBoard(h,f,"success")}var v=p.taskIds.slice();v.splice(r.index,1);var k=Object(B.a)({},p,{taskIds:v}),E=d.taskIds.slice();E.splice(n.index,0,o);var y=Object(B.a)({},d,{taskIds:E}),N=Object(B.a)({},a.props.board,{columns:Object(B.a)({},a.props.board.columns,(t={},Object(I.a)(t,k.id,k),Object(I.a)(t,y.id,y),t))}),w=a.props.board.tasks[o].title,O="".concat(a.props.user," moved the task '").concat(w,"' from '").concat(k.title,"' to '").concat(y.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:O,time:Date.now()}),a.props.updateBoard(N,O,"success")}},a.handleCheck=function(e,t){var n=a.props.board.columns[e].title,r="".concat(a.props.user," changed the name of '").concat(n,"' to $").concat(t);clearTimeout(a.state.timer),a.setState({timer:setTimeout((function(){var n=Object(B.a)({},a.props.board);n.columns[e].title=t,a.props.updateBoard(n,r,"success"),a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()})}),1e3)})},a.emitChange=function(e,t){console.log(e),a.setState({title:e.target.innerText},(function(e){a.handleCheck(t,a.state.title)}))},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.currColumnId,n=t.showTopMenuOptions,o=t.showAddForm;return r.a.createElement(ie.a,{onDragEnd:this.onDragEnd},r.a.createElement(ie.c,{droppableId:"all-columns",direction:"horizontal",type:"column"},(function(t){return r.a.createElement("div",Object.assign({className:"board-columns flex"},t.droppableProps,{ref:t.innerRef}),e.props.board.columnOrder.map((function(t,s){var i=e.props.board.columns[t],l=i.taskIds.map((function(t){return e.props.board.tasks[t]}));return r.a.createElement(ie.b,{draggableId:t,key:i.id,index:s},(function(t,s){return r.a.createElement(ce.a,{style:t.draggableProps.style,snapshot:s,rotationMultiplier:1.3},(function(s){return r.a.createElement("div",Object.assign({className:"board-columns-item"},t.draggableProps,{ref:t.innerRef,style:s}),r.a.createElement("div",Object.assign({className:"board-columns-item-header flex align-center space-between"},t.dragHandleProps),r.a.createElement("div",{className:"board-columns-item-header-h2-wrapper"},r.a.createElement("h2",{contentEditable:"true",spellCheck:"false",onInput:function(t){return e.emitChange(t,i.id)},suppressContentEditableWarning:!0},i.title)),r.a.createElement("div",{className:"board-columns-item-header-menu-btn",onClick:function(t){t.stopPropagation(),e.props.openEditColumn(i.id)}},r.a.createElement("h2",{className:"board-columns-item-header-menu-btn-icon"}," ... "))),n&&a===i.id?r.a.createElement(pe,{onDelete:e.onDelete,column:i,board:e.props.board,updateBoard:e.props.updateBoard,toggleTopMenuOptions:e.props.closeEditColumn,user:e.props.user}):"",r.a.createElement(ie.c,{droppableId:i.id,type:"task"},(function(t,a){return r.a.createElement(ve,{board:e.props.board,innerRef:t.innerRef,provided:t,tasks:l,isDraggingOver:a.isDraggingOver,column:i,toggleTaskDetails:e.props.toggleTaskDetails,updateBoard:e.props.updateBoard,toggleMiniDetails:e.props.toggleMiniDetails,user:e.props.user})})),r.a.createElement("div",{className:"task-list-footer"},(!o||a!==i.id)&&r.a.createElement("p",{className:"task-list-footer-add-task",onClick:function(t){t.stopPropagation(),e.props.openAddForm(i.id)}},"+ Add a task"),o&&a===i.id?r.a.createElement(ye,{user:e.props.user,board:e.props.board,column:i,closeUpdateForm:e.props.closeAddForm,updateBoard:e.props.updateBoard}):""))}))}))})),t.placeholder)})))}}]),t}(n.Component),we=a(73),Oe=a.n(we),xe=function(e){function t(){return Object(b.a)(this,t),Object(v.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"boardhistory-container column"+(this.props.showHistory?" translateLeft":"")},r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"uppercase text-center"},r.a.createElement("h2",null,"board history :")),r.a.createElement("hr",null)),r.a.createElement("ul",{className:"clean-list"},this.props.history.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"msg"},e.msg,r.a.createElement("br",null),Oe()(e.time).calendar()),r.a.createElement("hr",null))}))))}}]),t}(n.Component),je=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={currentBoardMembers:[]},a.componentDidMount=function(){a.setState({currentBoardMembers:a.props.board.teamMembers})},a.updateTeamMembers=function(e){var t=a.props.board,n=t.teamMembers,r="",o="";if(n.find((function(t){return t._id===e._id}))){var s=n.findIndex((function(t){return t._id===e._id}));n.splice(s,1),r="".concat(e.username," was removed from this board"),o="danger"}else n.push(e),r="".concat(e.username," was added to this board"),o="success";a.setState({currentBoardMembers:n}),a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),a.props.updateBoard(t,r,o)},a.onStopPropagation=function(e){e.stopPropagation()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.state.currentBoardMembers,a=this.props.users.filter((function(e){return!t.find((function(t){return e._id===t._id}))}));return r.a.createElement("div",{className:"board-team-members-container text-center column"+(this.props.toggleBoardTeamMembers?" translateLeft":""),onClick:function(t){return e.onStopPropagation(t)}},r.a.createElement("div",{className:"members-container-colors-container flex column"},r.a.createElement("div",{className:"pointer uppercase"},r.a.createElement("h2",null,"board members :")),r.a.createElement("hr",null),this.state.currentBoardMembers.map((function(t){return r.a.createElement("div",{key:t._id,className:"team-member flex align-center",onClick:function(){return e.updateTeamMembers(t)}},r.a.createElement("div",{className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(t.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",{className:"capitalize"},F.createUserIcon(t.firstName,t.lastName)))),r.a.createElement("span",{className:"capitalize"},t.firstName," ",t.lastName))}))),r.a.createElement("div",{className:"add-team-members flex column"},r.a.createElement("p",{className:"pointer uppercase"},"add / remove users"),a.map((function(t){return r.a.createElement("div",{key:t._id,className:"team-member flex align-center",onClick:function(){return e.updateTeamMembers(t)}},r.a.createElement("div",{className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(t.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",{className:"capitalize"},F.createUserIcon(t.firstName,t.lastName)))),r.a.createElement("span",{className:"capitalize"},t.firstName," ",t.lastName))}))))}}]),t}(n.Component),Ce=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={column:{id:F.getRandomId(),title:"",taskIds:[]}},a.inputChange=function(e){var t=e.target.name,n=e.target.value;a.setState({column:Object(B.a)({},a.state.column,Object(I.a)({},t,n))})},a.saveColumn=function(e){e.preventDefault();var t=Object(B.a)({},a.props.board,{columns:Object(B.a)({},a.props.board.columns,Object(I.a)({},a.state.column.id,a.state.column))}),n=a.state.column.id,r=t.columnOrder;r.includes(n)||r.push(n);var o="'".concat(a.state.column.title,"' was added by ")+a.props.user;a.props.board.history.unshift({id:F.getRandomId(),msg:o,time:Date.now()}),a.props.updateBoard(t,o,"success"),a.props.toggleAddForm()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.nameInput.focus(),this.setFormDataForEdit()}},{key:"componentDidUpdate",value:function(e){e.column!==this.props.column&&this.setFormDataForEdit()}},{key:"setFormDataForEdit",value:function(){if(this.props.column){var e=this.props.column;this.setState({column:{id:e.id,title:e.title,taskIds:e.taskIds}})}}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"add-column-form-container flex column space-between",onSubmit:this.saveColumn},r.a.createElement("input",{ref:function(t){e.nameInput=t},type:"text",placeholder:"Column Name",name:"title",onChange:this.inputChange,value:this.state.column.title}),r.a.createElement("div",{className:"add-column flex"},r.a.createElement("button",{className:"add-column-save-btn uppercase",variant:"contained"},"save"),r.a.createElement(Ee.a,{className:"add-column-back-to-board flex align-center",onClick:this.props.toggleAddForm})))}}]),t}(n.Component),Te=a(74),De=a.n(Te),Ie=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={filterBy:{title:"",teamMembers:""}},a.inputChange=function(e){var t=e.target.name,n=e.target.value;console.log(t,n),a.setState((function(e){return{filterBy:Object(B.a)({},e.filterBy,Object(I.a)({},t,n))}}))},a.onFilterClick=function(){a.props.onFilter(a.state.filterBy)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.teamMembers;return r.a.createElement("div",{className:"board-page-nav-bar-filters-item flex"},r.a.createElement("input",{type:"text",placeholder:"Search task by name",value:this.state.filterBy.title,onChange:this.inputChange,name:"title"}),r.a.createElement("select",{name:"teamMembers",onChange:this.inputChange},r.a.createElement("option",{value:""},"All Team Members"),e.map((function(e){return r.a.createElement("option",{key:e._id,value:"".concat(e.username)},e.firstName," ",e.lastName)}))),r.a.createElement("button",{className:"board-page-nav-bar-filters nav-btn",onClick:this.onFilterClick},r.a.createElement(De.a,{className:"flex"})))}}]),t}(n.Component),Be=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={sortBy:"",sortOrder:"asc"},a.inputChange=function(e){var t=e.target.name,n=e.target.value;a.setState((function(e){return{filterBy:Object(B.a)({},e.filterBy,Object(I.a)({},t,n))}}))},a.onSortBy=function(e){var t=e.target.name,n="asc"===a.state.sortOrder?"desc":"asc";a.setState({sortBy:t,sortOrder:n},(function(){return a.props.onSort(a.state.sortBy,a.state.sortOrder)}))},a.toggleButtonName=function(){return"asc"===a.state.sortOrder?"Newest Tasks":"Oldest Tasks"},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"board-page-nav-bar-filters-item fill-height"},r.a.createElement("button",{className:"nav-btn fill-height",onClick:this.onSortBy,name:"createdAt"},this.toggleButtonName()))}}]),t}(n.Component),Se=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={splashImagesUrls:[],filterByName:""},a.inputChange=function(e){a.setState({filterByName:e.target.value})},a.onSave=function(){var e,t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(F.getImagesFromUnsplash(a.state.filterByName));case 3:e=n.sent,t=[],e.forEach((function(e){var a=t.findIndex((function(t){return t===e.urls.full}));a>=0?t.splice(a,1):t.push(e.urls.full)})),a.setState({splashImagesUrls:t}),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),null,null,[[0,9]])},a.setBoardBackground=function(e){var t=Object(B.a)({},a.props.board);t.boardBgImage=e.target.src;var n="".concat(a.props.user," changed background image");a.props.board.history.unshift({id:F.getRandomId(),msg:n,time:Date.now()}),a.props.updateBoard(t,n,"success")},a.stopPropagation=function(e){e.stopPropagation()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"splash-menu flex column align-center"+(this.props.toggleSplashMenu?" translateLeft":""),onClick:function(t){return e.stopPropagation(t)}},r.a.createElement("div",{className:"flex column fill-width"},r.a.createElement("div",{className:"splash-menu-search-bar fill-width flex justify-center"},r.a.createElement("input",{type:"text",placeholder:"Search by name...",onChange:this.inputChange}),r.a.createElement("button",{className:"splash-menu-search-bar-save-btn",onClick:this.onSave},r.a.createElement(De.a,null))),r.a.createElement("button",{className:"splash-menu-search-bar-save-btn upload-btn"},r.a.createElement("input",{style:{display:"none"},type:"file",id:"upload-img",onChange:this.props.onAddImg}),r.a.createElement("label",{htmlFor:"upload-img"},"upload image"))),r.a.createElement("div",{className:"splash-images-container-wrapper"},r.a.createElement("div",{className:"splash-images-container flex wrap fill-width"},this.state.splashImagesUrls.map((function(t){return r.a.createElement("div",{key:t,className:"splash-images-container-item flex wrap"},r.a.createElement("img",{src:t,alt:"oops.. didn't found it",onClick:function(t){return e.setBoardBackground(t)}}))})))))}}]),t}(n.Component),Me=a(154),Ae=a.n(Me),Ue=a(158),Le=a.n(Ue),Fe=a(155),Re=a.n(Fe),Pe=a(109),He=a.n(Pe),_e=a(156),We=a.n(_e),ze=a(157),Ge=a.n(ze),Ve=a(151),qe=a.n(Ve),$e=(a(260),function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={dueDate:null},a.setDate=function(e){a.setState({dueDate:a.props.task.dueDate?new Date(a.props.task.dueDate):new Date})},a.handleChange=function(e){a.setState({dueDate:e}),a.saveTask()},a.saveTask=function(e){var t=Object(B.a)({},a.props.task,{dueDate:a.state.dueDate.getTime()}),n=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},t.id,t))}),r="".concat(a.props.user," changed the due date for task '").concat(a.props.task.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),a.props.updateBoard(n,r,"success")},a.onStopPropagation=function(e){e.stopPropagation()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setDate()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"duedate-edit flex column",onClick:function(t){return e.onStopPropagation(t)}},r.a.createElement(Ee.a,{className:"duedate-edit-close-btn",onClick:this.props.onToggle}),r.a.createElement("div",{className:"flex space-between datepicker-container"},r.a.createElement(qe.a,{selected:this.state.dueDate,onChange:this.handleChange,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"Time",dateFormat:"MMMM d, yyyy h:mm aa"}),r.a.createElement("button",{onClick:this.saveTask},"Set")))}}]),t}(r.a.Component)),Je=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={choosenLabels:[]},a.componentDidMount=function(){a.setNewState()},a.setNewState=function(){a.setState({choosenLabels:a.props.task.labels})},a.updateChoosenLabels=function(e){var t=e.target.classList[0],n=a.state.choosenLabels,r=n.findIndex((function(e){return e===t}));r>=0?n.splice(r,1):n.push(t),a.setState({choosenLabels:n},a.onSave)},a.onSave=function(){var e=Object(B.a)({},a.props.task,{labels:a.state.choosenLabels}),t=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},e.id,e))});a.props.updateBoard(t)},a.onStopPropagation=function(e){e.stopPropagation()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=null;return this.props.miniTask&&(t={left:"12px",top:"36px"}),r.a.createElement("div",{className:"labels-container text-center",onClick:function(t){return e.onStopPropagation(t)},style:Object(B.a)({},t)},r.a.createElement(Ee.a,{className:"labels-container-close-btn",onClick:this.props.toggleChooseLabels}),r.a.createElement("p",{className:"uppercase"},"choose labels"),r.a.createElement("hr",null),r.a.createElement("div",{className:"labels-container-colors-container flex column align-center "},r.a.createElement("div",{className:"label-color-1 large-label",onClick:function(t){return e.updateChoosenLabels(t)}}),r.a.createElement("div",{className:"label-color-2 large-label",onClick:function(t){return e.updateChoosenLabels(t)}}),r.a.createElement("div",{className:"label-color-3 large-label",onClick:function(t){return e.updateChoosenLabels(t)}}),r.a.createElement("div",{className:"label-color-4 large-label",onClick:function(t){return e.updateChoosenLabels(t)}}),r.a.createElement("div",{className:"label-color-5 large-label",onClick:function(t){return e.updateChoosenLabels(t)}}),r.a.createElement("div",{className:"label-color-6 large-label",onClick:function(t){return e.updateChoosenLabels(t)}})))}}]),t}(n.Component),Xe=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={choosenMembers:[],availableMembers:[]},a.componentDidMount=function(){a.setNewState()},a.setNewState=function(){a.setState({choosenMembers:a.props.task.taskTeamMembers},a.setAvailableMembers)},a.updateChoosenMembers=function(e){var t=a.state.choosenMembers,n=t.findIndex((function(t){return t._id===e._id})),r="",o="";n>=0?(t.splice(n,1),r="".concat(e.username," was released from the task '").concat(a.props.task.title,"'"),o="danger"):(t.push(e),r="".concat(e.username," was asigned to the task '").concat(a.props.task.title,"'"),o="success"),a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),a.setState({choosenMembers:t},a.setAvailableMembers(r,o))},a.setAvailableMembers=function(e,t){var n=a.props.board.teamMembers.filter((function(e){return!a.state.choosenMembers.find((function(t){return t._id===e._id}))}));a.setState({availableMembers:n},a.onSave(e,t))},a.onSave=function(e,t){var n=Object(B.a)({},a.props.task,{taskTeamMembers:a.state.choosenMembers}),r=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},n.id,n))});a.props.updateBoard(r,e,t)},a.onStopPropagation=function(e){e.stopPropagation()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=null;return this.props.pos&&(t={left:"10px",top:"72px"}),r.a.createElement("div",{className:"members-container text-center column",onClick:function(t){return e.onStopPropagation(t)},style:Object(B.a)({},t)},r.a.createElement(Ee.a,{className:"members-container-close-btn",onClick:this.props.toggleChooseMembers}),r.a.createElement("p",{className:"uppercase"},"assigned members"),r.a.createElement("hr",null),r.a.createElement("div",{className:"members-container-colors-container flex column"},this.props.task.taskTeamMembers.map((function(t){return r.a.createElement("div",{key:t._id,className:"team-member flex",onClick:function(){return e.updateChoosenMembers(t)}},r.a.createElement("div",{className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(t.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",null,F.createUserIcon(t.firstName,t.lastName)))),r.a.createElement("p",null,t.firstName),r.a.createElement("p",null,t.lastName))}))),r.a.createElement("div",{className:"add-team-members flex column"},r.a.createElement("p",{className:"uppercase"}," add a team member "),this.state.availableMembers.map((function(t){return r.a.createElement("div",{key:t._id,className:"team-member flex align-center",onClick:function(){return e.updateChoosenMembers(t)}},r.a.createElement("div",{className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(t.color)}},r.a.createElement("div",{className:"team-member-icon"},r.a.createElement("p",null,F.createUserIcon(t.firstName,t.lastName)))),r.a.createElement("p",null,t.firstName),r.a.createElement("p",null,t.lastName))}))))}}]),t}(n.Component),Ke=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={todos:[],text:"",toggleTodo:!1},a.componentDidMount=function(){a.setNewState()},a.setNewState=function(){a.setState({todos:a.props.task.todos})},a.toggleTodo=function(){a.setState((function(e){return{toggleTodo:!e.toggleTodo}}))},a.updateTodo=function(e){a.setState({text:e.target.value})},a.onSaveTodo=function(){var e={text:a.state.text,isDone:!1,id:F.getRandomId()},t=a.state.todos;t.push(e),a.setState({todos:t});var n=Object(B.a)({},a.props.task,{todos:a.state.todos}),r=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},n.id,n))});a.props.updateBoard(r)},a.onStopPropagation=function(e){e.stopPropagation()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"check-list-item-container text-center",onClick:function(t){return e.onStopPropagation(t)}},r.a.createElement(Ee.a,{className:"check-list-item-container-close-btn pointer",onClick:this.props.toggleTodos}),r.a.createElement("div",{className:"add-check-list-item-wrapper"},r.a.createElement("button",{className:"add-check-list-item uppercase fill-width",onClick:this.toggleTodo},"add task")),this.state.toggleTodo&&r.a.createElement("div",{className:"input-container flex column justify-center align-center"},r.a.createElement("input",{className:"text-center",type:"text",placeholder:"add new todo",value:this.state.text,onChange:this.updateTodo,name:"text"}),r.a.createElement("button",{onClick:this.onSaveTodo},"save")),r.a.createElement("ul",{className:"todos-contaienr clean-list"},this.props.task.todos.map((function(e){return r.a.createElement("li",{key:e.id,className:"todo-item clean-list"},e.text)}))),r.a.createElement("div",{className:"task-list-container-colors-container flex column align-center "}))}}]),t}(n.Component),Qe=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={deuDate:null,description:"",teamMembers:[],choosenMembers:[],choosenlabels:[],showActivity:!1,showEditDescriptionForm:!1,toggleChooseLabels:!1,toggleChooseMembers:!1,toggleTodos:!1,onToggleDueDate:!1,progressWidth:0},a.emitChange=function(e){var t=e.target.value;a.setState({description:t})},a.toggleUpdateDescriptionForm=function(){a.setState((function(e){return{showEditDescriptionForm:!e.showEditDescriptionForm}}))},a.onToggleDueDate=function(e){e.stopPropagation(),a.setState((function(e){return{onToggleDueDate:!e.onToggleDueDate}}))},a.closeUpdateDescriptionForm=function(){a.setState({toggleUpdateDescriptionForm:!1})},a.onStopPropagationAndCloseOptions=function(e){e.stopPropagation(),a.setState({toggleChooseLabels:!1,toggleChooseMembers:!1})},a.toggleChooseLabels=function(e){e.stopPropagation(),a.setState((function(e){return{toggleChooseLabels:!e.toggleChooseLabels}}))},a.onSaveDescription=function(e){var t=Object(B.a)({},e,{description:a.state.description}),n=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},t.id,t))}),r="The description of '".concat(e.title,"' was changed by ").concat(a.props.user);a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),a.props.updateBoard(n,r,"success")},a.toggleChooseMembers=function(e){e.stopPropagation(),a.setState((function(e){return{toggleChooseMembers:!e.toggleChooseMembers}}))},a.toggleTodos=function(e){e.stopPropagation(),a.setState((function(e){return{toggleTodos:!e.toggleTodos}}))},a.onDuplicateTask=function(e,t){var n=Object(B.a)({},t,{id:F.getRandomId()});e.taskIds.push(n.id);var r=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},n.id,n))}),o="The task '".concat(t.title,"' was duplicated by ").concat(a.props.user);a.props.board.history.unshift({id:F.getRandomId(),msg:o,time:Date.now()}),a.props.updateBoard(r,o,"success"),a.props.toggleTaskDetails()},a.toggleTodoDone=function(e){e.isDone=!e.isDone;var t=Object(B.a)({},a.props.board.tasks[a.props.taskId]),n=t.todos,r=n.findIndex((function(t){return t.id===e.id}));n[r].isDone=e.isDone;var o=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},t.id,t))});a.props.updateBoard(o),a.updateProgressBar()},a.updateProgressBar=function(){var e,t=a.state.progressWidth,n=a.props.board.tasks[a.props.taskId],r=n.todos.filter((function(e){return e.isDone})).length,o=Math.round(r/n.todos.length*100);e=t<o?setInterval((function(){t>=o?clearInterval(e):(t++,a.setState({progressWidth:t}))}),10):setInterval((function(){t<=o?clearInterval(e):(t--,a.setState({progressWidth:t}))}),10)},a.deleteTodo=function(e){var t=a.props.board.tasks[a.props.taskId],n=t.todos,r=n.findIndex((function(t){return t.id===e}));n.splice(r,1);var o=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},t.id,t))});a.props.updateBoard(o),a.updateProgressBar()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.board.tasks[this.props.taskId];this.setState({description:e.description})}},{key:"render",value:function(){var e=this,t=this.props.board.tasks[this.props.taskId],a=this.props.column;return r.a.createElement("div",{className:"screen flex align-center justify-center",onClick:function(){return e.props.toggleTaskDetails()}},r.a.createElement("div",{className:"task-details-container flex",onClick:function(t){return e.onStopPropagationAndCloseOptions(t)}},r.a.createElement(Ee.a,{className:"add-column-back-to-board   flex align-center",onClick:function(){return e.props.toggleTaskDetails()}}),r.a.createElement("div",{className:"task-details-container-main full"},r.a.createElement("header",{className:"task-details-container-header"},r.a.createElement("div",{className:"flex align-center"},r.a.createElement(Ae.a,null),r.a.createElement("h2",null,t.title)),r.a.createElement("div",{className:"task-details-container-in-list flex"},r.a.createElement("p",{className:"flex"},'in list "',a.title,'"'))),r.a.createElement("div",{className:"task-details-container-labels-container"},this.state.toggleChooseLabels?r.a.createElement(Je,{toggleChooseLabels:this.toggleChooseLabels,board:this.props.board,task:t,updateBoard:this.props.updateBoard}):"",r.a.createElement("div",{className:"flex align-center"},r.a.createElement(He.a,null),r.a.createElement("h2",null,"Labels :")),r.a.createElement("div",{className:"labels-choosen-container flex"},t.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" medium-label"})})))),r.a.createElement("div",{className:"task-details-container-check-list-container"},this.state.toggleTodos?r.a.createElement(Ke,{toggleTodos:this.toggleTodos,board:this.props.board,task:t,updateBoard:this.props.updateBoard}):"",r.a.createElement("div",{className:"flex align-center"},r.a.createElement(He.a,null),r.a.createElement("h2",null,"Check List :")),t.todos?r.a.createElement("div",{className:"check-list-container flex column"},t.todos.map((function(a){return console.log("im here task todo: ",t.todos.length),r.a.createElement("div",{key:a.id,className:"todo-item flex space-between"},r.a.createElement("div",{className:"flex align-center"},a.isDone?r.a.createElement("input",{type:"checkbox",onChange:function(){return e.toggleTodoDone(a)},checked:!0}):r.a.createElement("input",{type:"checkbox",onChange:function(){return e.toggleTodoDone(a)}}),r.a.createElement("p",{className:a.isDone?"text-decoration":""},a.text)),r.a.createElement(Re.a,{onClick:function(){return e.deleteTodo(a.id)}}))})),console.log("im here"),r.a.createElement("div",{className:"check-list-progress"},r.a.createElement("div",{className:"progress fill-height flex align-center",style:{width:this.state.progressWidth+"%"}},r.a.createElement("small",{className:"fill-width text-center"},this.state.progressWidth+"%")))):""),r.a.createElement("div",{className:"task-details-container-members-container"},this.state.toggleChooseMembers?r.a.createElement(Xe,{toggleChooseMembers:this.toggleChooseMembers,board:this.props.board,task:t,updateBoard:this.props.updateBoard,users:this.props.users}):"",r.a.createElement("div",{className:"flex align-center"},r.a.createElement(We.a,null),r.a.createElement("h2",null,"Team Members :")),r.a.createElement("div",{className:"members-choosen-container flex column"},t.taskTeamMembers.map((function(e){return r.a.createElement("div",{key:e._id,className:"flex"},r.a.createElement("div",{className:"team-member-icon-wrapper flex align-center justify-center",style:{backgroundColor:"".concat(e.color)}},r.a.createElement("div",{className:"team-member-icon flex align-center"},r.a.createElement("p",null,F.createUserIcon(e.firstName,e.lastName)))),r.a.createElement("p",{className:" flex align-center"},e.firstName),r.a.createElement("p",{className:" flex align-center"}," ",e.lastName))})))),r.a.createElement("div",{className:"task-details-container-duedate-container"},r.a.createElement("div",{className:"flex align-center"},r.a.createElement(Ge.a,null),r.a.createElement("h2",null,"Due Date :")),r.a.createElement("div",null,t.dueDate?r.a.createElement("p",null,Oe()(t.dueDate).calendar()):r.a.createElement("p",null,"This task doesn't have a due date yet")),this.state.onToggleDueDate?r.a.createElement($e,{task:t,onToggle:this.onToggleDueDate,board:this.props.board,updateBoard:this.props.updateBoard,user:this.props.user}):""),r.a.createElement("div",{className:"task-details-container-main-description"},r.a.createElement("div",{className:"flex align-center"},r.a.createElement(Le.a,null),r.a.createElement("h2",null,"Description")),r.a.createElement("div",{className:"flex column text-area-wrapper",onClick:this.toggleUpdateDescriptionForm},r.a.createElement("form",{onSubmit:this.save},r.a.createElement("textarea",{className:"fill-width",name:"description",rows:"3",cols:"40",onInput:this.emitChange,defaultValue:t.description,spellCheck:"false",placeholder:"Add a more detailed description..."})),this.state.showEditDescriptionForm?r.a.createElement("div",{className:"flex align-center"},r.a.createElement("button",{className:"task-form-save-btn uppercase",onClick:function(){return e.onSaveDescription(t)}},"save"),r.a.createElement(Ee.a,{className:"task-form-back-btn",onClick:this.closeUpdateDescriptionForm})):""))),r.a.createElement("div",{className:"task-details-container-overall-options"},r.a.createElement("div",{className:"task-details-container-add-to-card-options-container"},r.a.createElement("p",{className:"text-center uppercase"},"add to card"),r.a.createElement("div",{className:"task-details-container-add-to-card-options flex column"},r.a.createElement("button",{className:"task-details-container-add-to-card-options-btn btn",onClick:function(t){return e.toggleChooseLabels(t)}},"Labels"),r.a.createElement("button",{className:"task-details-container-add-to-card-options-btn btn",onClick:function(t){return e.toggleChooseMembers(t)}},"Members"),r.a.createElement("button",{className:"task-details-container-add-to-card-options-btn btn",onClick:function(t){return e.toggleTodos(t)}},"Check List"),r.a.createElement("button",{className:"task-details-container-add-to-card-options-btn btn",onClick:function(t){return e.onToggleDueDate(t)}},"Due date"))),r.a.createElement("div",{className:"task-details-container-actions-options-container"},r.a.createElement("p",{className:"text-center uppercase"},"actions"),r.a.createElement("div",{className:"task-details-container-actions-options-actions flex column"},r.a.createElement("button",{className:"task-details-container-actions-options-btn btn",onClick:function(){return e.onDuplicateTask(a,t)}},"Duplicate"))))))}}]),t}(n.Component),Ye=function(e){function t(){return Object(b.a)(this,t),Object(v.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.onClick;return r.a.createElement("div",{className:"mini-details-editor-button",onClick:a},r.a.createElement("p",null,t))}}]),t}(n.Component),Ze=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={onToggleLabels:!1,onToggleDueDate:!1,onToggleMembers:!1},a.onToggleLabels=function(e){a.setState((function(e){return{onToggleLabels:!e.onToggleLabels}}))},a.onToggleDueDate=function(e){a.setState((function(e){return{onToggleDueDate:!e.onToggleDueDate}}))},a.onToggleMembers=function(e){a.setState((function(e){return{onToggleMembers:!e.onToggleMembers}}))},a.onDuplicateTask=function(e){var t=a.props.miniTask.task,n=Object(B.a)({},t,{id:F.getRandomId()}),r=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},n.id,n))});r.columns[a.props.miniTask.column.id].taskIds.push(n.id);var o="The task '".concat(t.title,"' was duplicated by ").concat(a.props.user);a.props.board.history.unshift({id:F.getRandomId(),msg:o,time:Date.now()}),a.props.updateBoard(r,o,"success"),a.props.onToggle()},a.onDelete=function(e){var t=a.props.miniTask,n=Object(B.a)({},a.props.board),r=a.props.miniTask.column.taskIds,o=n.tasks[t.task.id],s=r.findIndex((function(e){return e===t.task.id}));r.splice(s,1),delete n.tasks[t.task.id];var i="'".concat(o.title,"' was deleted by ").concat(a.props.user);a.props.board.history.unshift({id:F.getRandomId(),msg:i,time:Date.now()}),a.props.updateBoard(n,i,"danger"),a.props.onToggle()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.miniTask,t=this.props.miniTask.boundingClientRect,a=t.top;return a+180>window.innerHeight&&(a=window.innerHeight-180),r.a.createElement("div",{className:"mini-details-editor",style:{left:t.left+265+"px",top:a+1+"px"}},r.a.createElement(Ye,{text:"\ud83d\udd8a\ufe0f Edit Labels",onClick:this.onToggleLabels}),this.state.onToggleLabels?r.a.createElement(Je,{miniTask:e,task:e.task,toggleChooseLabels:this.onToggleLabels,board:this.props.board,updateBoard:this.props.updateBoard}):"",r.a.createElement(Ye,{text:"\ud83c\udfad Change Members",onClick:this.onToggleMembers}),this.state.onToggleMembers?r.a.createElement(Xe,{pos:!0,task:e.task,board:this.props.board,updateBoard:this.props.updateBoard,toggleChooseMembers:this.onToggleMembers}):"",r.a.createElement(Ye,{text:"\ud83d\udcc5 Change Due Date",onClick:this.onToggleDueDate}),this.state.onToggleDueDate?r.a.createElement($e,{task:e.task,onToggle:this.onToggleDueDate,board:this.props.board,updateBoard:this.props.updateBoard}):"",r.a.createElement(Ye,{text:"\u2398 Duplicate Task",onClick:this.onDuplicateTask}),r.a.createElement(Ye,{text:"\ud83d\uddd1\ufe0f Delete Task",onClick:this.onDelete}))}}]),t}(n.Component);function et(e){return r.a.createElement("div",{className:"screen-filter",onClick:function(t){return e.onToggle()}})}var tt=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a.handleFocus=function(e){e.target.select()},a.emitChange=function(e){var t=e.target.value;a.setState({title:t})},a.onSave=function(e){var t=Object(B.a)({},a.props.miniTask.task,{title:a.state.title?a.state.title:a.props.miniTask.task.title}),n=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},t.id,t))}),r="".concat(a.props.user," changed the title of the task '").concat(a.props.miniTask.task.title,"' to '").concat(a.state.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),a.props.updateBoard(n,r,"success"),a.props.onToggle()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.refs.textarea.focus()}},{key:"render",value:function(){var e=this.props.miniTask.task,t=this.props.miniTask.boundingClientRect,a=e.labels.length,n=t.height,o=t.top;return n+o>window.innerHeight&&(n=window.innerHeight-o-50>248?window.innerHeight-o-50:248),t.top>window.innerHeight-window.innerHeight/4&&(o=window.innerHeight-n-50),r.a.createElement("div",{className:"mini-details-container"},r.a.createElement("div",{className:"mini-details",style:{left:t.left+"px",top:o+"px",height:n+"px"}},r.a.createElement("div",{className:"task-container-labels flex"},e.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" small-label"})}))),r.a.createElement("textarea",{name:"title",className:"text-area"+(a>0?" preview-label":""),defaultValue:e.title,ref:"textarea",onFocus:this.handleFocus,onInput:this.emitChange,placeholder:"Add a task title..."})),r.a.createElement("button",{className:"mini-details-save-btn",style:{left:t.left+"px",top:o+n+10+"px"},onClick:this.onSave},"SAVE"),r.a.createElement(Ze,{user:this.props.user,miniTask:this.props.miniTask,board:this.props.board,updateBoard:this.props.updateBoard,onToggle:this.props.onToggle}),r.a.createElement(et,{onToggle:this.props.onToggle}))}}]),t}(n.Component),at=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a.handleFocus=function(e){e.target.select()},a.emitChange=function(e){var t=e.target.value;a.setState({title:t})},a.onSave=function(e){var t=Object(B.a)({},a.props.miniTask.task,{title:a.state.title?a.state.title:a.props.miniTask.task.title}),n=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},t.id,t))}),r="".concat(a.props.user," updated the task '").concat(a.props.miniTask.task.title,"' to '").concat(a.state.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),a.props.updateBoard(n,r,"success"),a.props.onToggle()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.refs.textarea.focus()}},{key:"render",value:function(){var e=this.props.miniTask.task,t=this.props.miniTask.boundingClientRect,a=e.labels.length,n=t.height,o=t.top;return n+o>window.innerHeight&&(n=window.innerHeight-o-50>252?window.innerHeight-o-50:252),t.top>window.innerHeight-window.innerHeight/4&&(o=window.innerHeight-n-50),r.a.createElement("div",{className:"mini-details-container"},r.a.createElement("div",{className:"mini-details",style:{left:t.left+"px",top:o+"px",height:n+"px"}},r.a.createElement("img",{title:e.id,alt:"task",src:e.url}),r.a.createElement("div",{className:"task-container-labels flex"},e.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" small-label"})}))),r.a.createElement("textarea",{name:"title",className:"text-area"+(a>0?" preview-label":""),style:{height:n-220+"px",position:"relative"},defaultValue:e.title,ref:"textarea",onFocus:this.handleFocus,onInput:this.emitChange,placeholder:"Add a task title..."})),r.a.createElement("button",{className:"mini-details-save-btn",style:{left:t.left+"px",top:o+n+(e.title?10:32)+"px"},onClick:this.onSave},"SAVE"),r.a.createElement(Ze,{user:this.props.user,miniTask:this.props.miniTask,board:this.props.board,updateBoard:this.props.updateBoard,onToggle:this.props.onToggle}),r.a.createElement(et,{onToggle:this.props.onToggle}))}}]),t}(n.Component),nt={text:tt,video:function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a.handleFocus=function(e){e.target.select()},a.emitChange=function(e){var t=e.target.value;a.setState({title:t})},a.onSave=function(e){var t=Object(B.a)({},a.props.miniTask.task,{title:a.state.title?a.state.title:a.props.miniTask.task.title}),n=Object(B.a)({},a.props.board,{tasks:Object(B.a)({},a.props.board.tasks,Object(I.a)({},t.id,t))}),r="".concat(a.props.user," updated the task '").concat(a.props.miniTask.task.title,"' to '").concat(a.state.title,"'");a.props.board.history.unshift({id:F.getRandomId(),msg:r,time:Date.now()}),a.props.updateBoard(n,r,"success"),a.props.onToggle()},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.refs.textarea.focus()}},{key:"render",value:function(){var e=this.props.miniTask.task,t=this.props.miniTask.boundingClientRect,a=140,n=246,o=e.labels.length,s=t.height,i=t.top;return s+i>window.innerHeight&&(s=window.innerHeight-i-50>248?window.innerHeight-i-50:248),t.top>window.innerHeight-window.innerHeight/4&&(i=window.innerHeight-s-50),r.a.createElement("div",{className:"mini-details-container"},r.a.createElement("div",{className:"mini-details",style:{left:t.left+"px",top:i+"px",height:s+"px"}},r.a.createElement("iframe",{title:e.id,type:"text/html",width:n,height:a,src:e.url,allowFullScreen:"allowfullscreen"}),r.a.createElement("div",{className:"task-container-labels flex"},e.labels.map((function(e){return r.a.createElement("div",{key:e,className:e+" small-label"})}))),r.a.createElement("textarea",{name:"title",className:"text-area"+(o>0?" preview-label":""),style:{height:s-a,position:"relative",bottom:"14px"},defaultValue:e.title,ref:"textarea",onFocus:this.handleFocus,onInput:this.emitChange,placeholder:"Add a task title..."})),r.a.createElement("button",{className:"mini-details-save-btn",style:{left:t.left+"px",top:i+s+(e.title?10:32)+"px"},onClick:this.onSave},"SAVE"),r.a.createElement(Ze,{user:this.props.user,miniTask:this.props.miniTask,board:this.props.board,updateBoard:this.props.updateBoard,onToggle:this.props.onToggle}),r.a.createElement(et,{onToggle:this.props.onToggle}))}}]),t}(n.Component),image:at},rt=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={previewType:"text"},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({previewType:this.props.miniTask.previewType})}},{key:"getComponent",value:function(){return nt[this.state.previewType]}},{key:"render",value:function(){var e=this.getComponent();return r.a.createElement(r.a.Fragment,null,r.a.createElement(e,{miniTask:this.props.miniTask,updateBoard:this.props.updateBoard,onToggle:this.props.onToggle,board:this.props.board,user:this.props.user}))}}]),t}(n.Component),ot=a(159),st=a.n(ot),it=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={showColAddForm:!0,showTaskDetails:!1,showMiniTaskDetails:!1,toggleUploadBgImg:!1,toggleLogin:!1,toggleSplashMenu:!1,showHistory:!1,toggleBoardTeamMembers:!1,miniTaskDetails:{},filterBy:{title:"",teamMembers:""},sortBy:"",sortOrder:"",showTopMenuOptions:!0,showAddForm:!1,currColumnId:""},a.loadBoard=function(){var e=a.props.match.params.id,t=a.state.filterBy,n=a.state.sortBy,r=a.state.sortOrder;a.props.loadBoard(e,t,n,r)},a.toggleAddColumn=function(){a.setState((function(e){return{showColAddForm:!e.showColAddForm}}))},a.goBack=function(){a.props.history.push("/")},a.toggleLogin=function(e){e.stopPropagation(),a.setState((function(e){return{toggleLogin:!e.toggleLogin,showHistory:!1,toggleBoardTeamMembers:!1,toggleSplashMenu:!1}}))},a.closeAllTabs=function(e){e.stopPropagation(),a.setState({toggleLogin:!1,toggleSplashMenu:!1,showHistory:!1,toggleBoardTeamMembers:!1,showTopMenuOptions:!1,showAddForm:!1})},a.toggleTaskDetails=function(e){void 0===e?a.setState((function(e){return{showTaskDetails:!e.showTaskDetails}})):a.state.showTaskDetails&&e.id!==a.state.currTask.id?a.setState({currTask:e}):a.setState((function(t){return{showTaskDetails:!t.showTaskDetails,currTask:e}}))},a.onAddImg=function(e){var t=e.target.files[0];F.uploadImg(t).then((function(e){var t=Object(B.a)({},a.props.board);t.boardBgImage=e;var n="".concat(a.props.user," changed background image");a.props.board.history.unshift({id:F.getRandomId(),msg:n,time:Date.now()}),a.props.updateBoard(t,n,"success")}))},a.onFilter=function(e){a.setState({filterBy:e},a.loadBoard)},a.onSort=function(e,t){a.setState({sortBy:e,sortOrder:t},a.loadBoard)},a.toggleMiniDetails=function(e){if(e)return a.setState((function(t){return{showMiniTaskDetails:!t.showMiniTaskDetails,miniTaskDetails:e}}));a.setState((function(e){return{showMiniTaskDetails:!e.showMiniTaskDetails}}))},a.toggleSplashMenu=function(e){e.stopPropagation(),a.setState((function(e){return{toggleSplashMenu:!e.toggleSplashMenu,showHistory:!1,toggleBoardTeamMembers:!1,toggleLogin:!1}}))},a.toggleBoardHistory=function(e){e.stopPropagation(),a.setState((function(e){return{showHistory:!e.showHistory,toggleSplashMenu:!1,toggleBoardTeamMembers:!1,toggleLogin:!1}}))},a.toggleBoardTeamMembers=function(e){e.stopPropagation(),a.setState((function(e){return{toggleBoardTeamMembers:!e.toggleBoardTeamMembers,showHistory:!1,toggleSplashMenu:!1,toggleLogin:!1}}))},a.openAddForm=function(e){a.setState({showAddForm:!0,currColumnId:e},a.closeEditColumn)},a.closeAddForm=function(e){a.setState({showAddForm:!1})},a.openEditColumn=function(e){a.setState({showTopMenuOptions:!0,currColumnId:e},a.closeAddForm())},a.closeEditColumn=function(e){a.setState({showTopMenuOptions:!1})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getUsers(),this.props.getLoggedInUser(),this.loadBoard();var t=this.props.match.params.id;L.setup(),L.emit("boardId",t),L.on("updateBoard",(function(t){return e.props.setBoard(t)})),L.on("getNotification",(function(e){return l.store.addNotification(e)}))}},{key:"componentWillUnmount",value:function(){L.off("updateBoard"),L.off("getNotification"),L.terminate()}},{key:"render",value:function(){var e,t=this;return this.props.board.columns?(e=this.props.loggedInUser?r.a.createElement("button",{className:"board-page-nav-bar nav-btn",onClick:this.props.logout},"logout"):r.a.createElement("button",{className:"board-page-nav-bar nav-btn",onClick:function(e){return t.toggleLogin(e)}},"login"),r.a.createElement("div",{className:"screen",onClick:this.closeAllTabs},r.a.createElement("div",{className:"board-page fill-height flex column",style:{backgroundImage:"url("+this.props.board.boardBgImage+")",backgroundAttachment:"fixed"}},r.a.createElement("div",{className:"board-page-nav-bar flex space-between"},r.a.createElement("div",{className:"board-page-nav-bar-logo",onClick:this.goBack}," "),r.a.createElement("div",{className:"flex align-center"},this.props.loggedInUser&&r.a.createElement("p",{className:"logged-in-user"},"Logged in as: ",this.props.loggedInUser.username),e)),r.a.createElement("div",{className:"board-page-nav-bar-filters flex align-center space-between"},r.a.createElement("div",{className:"board-page-nav-bar-filters-item flex align-center"},r.a.createElement("button",{className:"board-page-nav-bar-filters nav-btn flex"},r.a.createElement(st.a,{onClick:this.goBack})),r.a.createElement(Ie,{onFilter:this.onFilter,teamMembers:this.props.board.teamMembers}),r.a.createElement(Be,{onSort:this.onSort})),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"board-page-nav-bar-filters-item fill-height"},r.a.createElement("button",{className:"nav-btn fill-height",onClick:this.toggleBoardTeamMembers},"Add Members")),r.a.createElement("div",{className:"board-page-nav-bar-filters-item fill-height"},r.a.createElement("button",{className:"nav-btn fill-height",onClick:function(e){return t.toggleSplashMenu(e)}},"Change Background")),r.a.createElement("div",{className:"board-page-nav-bar-filters-item flex fill-height"},r.a.createElement("button",{className:"board-page-nav-bar-filters nav-btn",onClick:this.toggleBoardHistory},"Show History")))),r.a.createElement(Se,{toggleSplashMenu:this.state.toggleSplashMenu,board:this.props.board,updateBoard:this.props.updateBoard,toggleUploadBgImg:this.toggleUploadBgImg,onAddImg:this.onAddImg,showUploadBgImg:this.state.toggleUploadBgImg,user:this.props.loggedInUser?this.props.loggedInUser.username:"Guest"}),this.state.toggleLogin&&r.a.createElement(Q,{variant:"outlined",className:"home-page-login",toggleLogin:this.toggleLogin}),r.a.createElement("div",{className:"board-page-columns-container"},r.a.createElement("div",{className:"flex align-start fill-height"},r.a.createElement(Q,{variant:"outlined",className:"home-page-login",toggleLogin:this.toggleLogin,toggleState:this.state.toggleLogin}),r.a.createElement(Ne,{board:this.props.board,updateBoard:this.props.updateBoard,toggleTaskDetails:this.toggleTaskDetails,toggleMiniDetails:this.toggleMiniDetails,user:this.props.loggedInUser?this.props.loggedInUser.username:"Guest",currColumnId:this.state.currColumnId,openAddForm:this.openAddForm,closeAddForm:this.closeAddForm,openEditColumn:this.openEditColumn,closeEditColumn:this.closeEditColumn,showTopMenuOptions:this.state.showTopMenuOptions,showAddForm:this.state.showAddForm}),r.a.createElement("div",{className:"flex column align-center"},this.state.showColAddForm?r.a.createElement("button",{className:"board-page-add-another-column-btn",onClick:this.toggleAddColumn},"+ Add another list..  "):"",!this.state.showColAddForm&&r.a.createElement(Ce,{board:this.props.board,updateBoard:this.props.updateBoard,toggleAddForm:this.toggleAddColumn,user:this.props.loggedInUser?this.props.loggedInUser.username:"Guest"})))),this.state.showTaskDetails&&r.a.createElement(Qe,{taskId:this.state.currTask.id,board:this.props.board,column:this.state.currTask.column,updateBoard:this.props.updateBoard,toggleTaskDetails:this.toggleTaskDetails,user:this.props.loggedInUser?this.props.loggedInUser.username:"Guest"}),this.state.showMiniTaskDetails&&r.a.createElement(rt,{miniTask:this.state.miniTaskDetails,updateBoard:this.props.updateBoard,onToggle:this.toggleMiniDetails,board:this.props.board,user:this.props.loggedInUser?this.props.loggedInUser.username:"Guest"}),r.a.createElement(xe,{variant:"outlined",className:"home-page-login",history:this.props.board.history,showHistory:this.state.showHistory,toggleBoardHistory:this.toggleBoardHistory}),r.a.createElement(je,{board:this.props.board,users:this.props.users,toggleBoardTeamMembers:this.state.toggleBoardTeamMembers,updateBoard:this.props.updateBoard})))):r.a.createElement("div",{className:"loading-page flex column align-center justify-center"},r.a.createElement("h2",{className:"uppercase"}," just a moment :)"),r.a.createElement(se.a,null))}}]),t}(n.Component),lt={loadBoard:ee,updateBoard:function(e,t,a){return function(n){return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(ae(e)),r.next=4,h.a.awrap(Y.put(e));case 4:L.emit("boardUpdate",e),F.emitNotification(t,a),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("BoardActions: err in loadBoard",r.t0);case 11:case"end":return r.stop()}}),null,null,[[0,8]])}},logout:V,getLoggedInUser:q,setBoard:function(e){return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:try{t(te(e))}catch(n){console.log("BoardActions: err in setBoard",n)}case 1:case"end":return a.stop()}}))}},getUsers:function(){return function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(G.getUsers());case 3:t=a.sent,e(J(t)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("UserActions: err in getUsers",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])}}},ct=Object(i.b)((function(e){return{board:e.boards.board,loggedInUser:e.user.loggedInUser,users:e.user.users}}),lt)(it);var ut=function(){return r.a.createElement(u.a,{history:m},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",component:oe,exact:!0}),r.a.createElement(p.a,{path:"/board/:id",component:ct,exact:!0})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(318);var pt=a(23),dt=a(160),mt={boards:[],board:{}},gt={loggedInUser:null,users:[]},ht={isLoading:!1},bt=Object(pt.c)({boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_BOARDS":return Object(B.a)({},e,{boards:t.boards});case"SET_BOARD":case"UPDATE_BOARD":return Object(B.a)({},e,{board:t.board});case"ADD_BOARD":return Object(B.a)({},e,{boards:[].concat(Object(ue.a)(e.boards),[t.addedBoard])});default:return e}},system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(B.a)({},e,{isLoading:!0});case"LOADING_DONE":return Object(B.a)({},e,{isLoading:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(B.a)({},e,{loggedInUser:t.user});case"SET_USERS":return Object(B.a)({},e,{users:t.users});default:return e}}}),ft=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pt.d,vt=Object(pt.e)(bt,ft(Object(pt.a)(dt.a)));s.a.render(r.a.createElement(i.a,{store:vt},r.a.createElement(c.a,null),r.a.createElement(ut,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[164,1,2]]]);
//# sourceMappingURL=main.93a4bec6.chunk.js.map